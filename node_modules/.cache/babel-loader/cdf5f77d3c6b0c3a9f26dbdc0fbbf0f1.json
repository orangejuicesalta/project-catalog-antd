{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.anchor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/web.btoa.js\";\nimport \"core-js/modules/web.dom-exception.constructor.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.dom-exception.to-string-tag.js\";\nimport \"core-js/modules/es.unescape.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.dot-all.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.create.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.reverse.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/web.url.to-json.js\";\nimport \"core-js/modules/es.object.define-properties.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.function.name.js\";\n\n/*!\n * LiquorTree v0.2.70\n * (c) 2019 amsik\n * Released under the MIT License.\n */\nvar NodeContent = {\n  name: 'node-content',\n  props: ['node'],\n  render: function render(h) {\n    var this$1 = this;\n    var node = this.node;\n    var vm = this.node.tree.vm;\n\n    if (node.isEditing) {\n      var nodeText = node.text;\n      this.$nextTick(function (_) {\n        this$1.$refs.editCtrl.focus();\n      });\n      return h('input', {\n        domProps: {\n          value: node.text,\n          type: 'text'\n        },\n        \"class\": 'tree-input',\n        on: {\n          input: function input(e) {\n            nodeText = e.target.value;\n          },\n          blur: function blur() {\n            node.stopEditing(nodeText);\n          },\n          keyup: function keyup(e) {\n            if (e.keyCode === 13) {\n              node.stopEditing(nodeText);\n            }\n          },\n          mouseup: function mouseup(e) {\n            e.stopPropagation();\n          }\n        },\n        ref: 'editCtrl'\n      });\n    }\n\n    if (vm.$scopedSlots[\"default\"]) {\n      return vm.$scopedSlots[\"default\"]({\n        node: this.node\n      });\n    }\n\n    return h('span', {\n      domProps: {\n        innerHTML: node.text\n      }\n    });\n  }\n};\n\nfunction normalizeComponent(compiledTemplate, injectStyle, defaultExport, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, isShadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof isShadowMode === 'function') {\n    createInjectorSSR = createInjector;\n    createInjector = isShadowMode;\n    isShadowMode = false;\n  } // Vue.extend constructor export interop\n\n\n  var options = typeof defaultExport === 'function' ? defaultExport.options : defaultExport; // render functions\n\n  if (compiledTemplate && compiledTemplate.render) {\n    options.render = compiledTemplate.render;\n    options.staticRenderFns = compiledTemplate.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (injectStyle) {\n        injectStyle.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (injectStyle) {\n    hook = isShadowMode ? function () {\n      injectStyle.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      injectStyle.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return defaultExport;\n}\n/* script */\n\n\nvar __vue_script__ = NodeContent; // For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\n\nNodeContent.__file = \"NodeContent.vue\";\n/* template */\n\n/* style */\n\nvar __vue_inject_styles__ = undefined;\n/* scoped */\n\nvar __vue_scope_id__ = undefined;\n/* module identifier */\n\nvar __vue_module_identifier__ = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__ = undefined;\n/* style inject */\n\n/* style inject SSR */\n\nvar NodeContent$1 = normalizeComponent({}, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, undefined, undefined); //\n\nvar TreeNode = {\n  name: 'Node',\n  inject: ['tree'],\n  props: ['node', 'options'],\n  components: {\n    NodeContent: NodeContent$1\n  },\n  watch: {\n    node: function node() {\n      this.node.vm = this;\n    }\n  },\n  data: function data() {\n    this.node.vm = this;\n    return {\n      loading: false\n    };\n  },\n  computed: {\n    padding: function padding() {\n      return this.node.depth * (this.options.paddingLeft ? this.options.paddingLeft : this.options.nodeIndent) + 'px';\n    },\n    nodeClass: function nodeClass() {\n      var state = this.node.states;\n      var hasChildren = this.hasChildren();\n      var classes = {\n        'has-child': hasChildren,\n        'expanded': hasChildren && state.expanded,\n        'selected': state.selected,\n        'disabled': state.disabled,\n        'matched': state.matched,\n        'dragging': state.dragging,\n        'loading': this.loading,\n        'draggable': state.draggable\n      };\n\n      if (this.options.checkbox) {\n        classes['checked'] = state.checked;\n        classes['indeterminate'] = state.indeterminate;\n      }\n\n      return classes;\n    },\n    visibleChildren: function visibleChildren() {\n      return this.node.children.filter(function (child) {\n        return child && child.visible();\n      });\n    }\n  },\n  methods: {\n    onNodeFocus: function onNodeFocus() {\n      this.tree.activeElement = this.node;\n    },\n    focus: function focus() {\n      this.$refs.anchor.focus();\n      this.node.select();\n    },\n    check: function check() {\n      if (this.node.checked()) {\n        this.node.uncheck();\n      } else {\n        this.node.check();\n      }\n    },\n    select: function select(ref) {\n      if (ref === void 0) ref = evnt;\n      var ctrlKey = ref.ctrlKey;\n      var opts = this.options;\n      var tree = this.tree;\n      var node = this.node;\n      tree.$emit('node:clicked', node);\n\n      if (opts.editing && node.isEditing) {\n        return;\n      }\n\n      if (opts.editing && node.editable()) {\n        return this.startEditing();\n      }\n\n      if (opts.checkbox && opts.checkOnSelect) {\n        if (!opts.parentSelect && this.hasChildren()) {\n          return this.toggleExpand();\n        }\n\n        return this.check(ctrlKey);\n      } // 'parentSelect' behaviour.\n      // For nodes which has a children list we have to expand/collapse\n\n\n      if (!opts.parentSelect && this.hasChildren()) {\n        this.toggleExpand();\n      }\n\n      if (opts.multiple) {\n        if (!node.selected()) {\n          node.select(ctrlKey);\n        } else {\n          if (ctrlKey) {\n            node.unselect();\n          } else {\n            if (this.tree.selectedNodes.length != 1) {\n              tree.unselectAll();\n              node.select();\n            }\n          }\n        }\n      } else {\n        if (node.selected() && ctrlKey) {\n          node.unselect();\n        } else {\n          node.select();\n        }\n      }\n    },\n    toggleExpand: function toggleExpand() {\n      if (this.hasChildren()) {\n        this.node.toggleExpand();\n      }\n    },\n    hasChildren: function hasChildren() {\n      return this.node.hasChildren();\n    },\n    startEditing: function startEditing() {\n      if (this.tree._editingNode) {\n        this.tree._editingNode.stopEditing();\n      }\n\n      this.node.startEditing();\n    },\n    stopEditing: function stopEditing() {\n      this.node.stopEditing();\n    },\n    handleMouseDown: function handleMouseDown(event) {\n      if (!this.options.dnd) {\n        return;\n      }\n\n      this.tree.vm.startDragging(this.node, event);\n    }\n  }\n};\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\n\nfunction createInjector(context) {\n  return function (id, style) {\n    return addStyle(id, style);\n  };\n}\n\nvar HEAD = document.head || document.getElementsByTagName('head')[0];\nvar styles = {};\n\nfunction addStyle(id, css) {\n  var group = isOldIE ? css.media || 'default' : id;\n  var style = styles[group] || (styles[group] = {\n    ids: new Set(),\n    styles: []\n  });\n\n  if (!style.ids.has(id)) {\n    style.ids.add(id);\n    var code = css.source;\n\n    if (css.map) {\n      // https://developer.chrome.com/devtools/docs/javascript-debugging\n      // this makes source maps inside style tags work properly in Chrome\n      code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n      code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n    }\n\n    if (!style.element) {\n      style.element = document.createElement('style');\n      style.element.type = 'text/css';\n\n      if (css.media) {\n        style.element.setAttribute('media', css.media);\n      }\n\n      HEAD.appendChild(style.element);\n    }\n\n    if ('styleSheet' in style.element) {\n      style.styles.push(code);\n      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n    } else {\n      var index = style.ids.size - 1;\n      var textNode = document.createTextNode(code);\n      var nodes = style.element.childNodes;\n\n      if (nodes[index]) {\n        style.element.removeChild(nodes[index]);\n      }\n\n      if (nodes.length) {\n        style.element.insertBefore(textNode, nodes[index]);\n      } else {\n        style.element.appendChild(textNode);\n      }\n    }\n  }\n}\n/* script */\n\n\nvar __vue_script__$1 = TreeNode; // For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\n\nTreeNode.__file = \"TreeNode.vue\";\n/* template */\n\nvar __vue_render__ = function __vue_render__() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return _c('li', {\n    staticClass: \"tree-node\",\n    \"class\": _vm.nodeClass,\n    attrs: {\n      \"data-id\": _vm.node.id\n    },\n    on: {\n      \"mousedown\": function mousedown($event) {\n        $event.stopPropagation();\n        return _vm.handleMouseDown($event);\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"tree-content\",\n    style: [_vm.options.direction == 'ltr' ? {\n      'padding-left': _vm.padding\n    } : {\n      'padding-right': _vm.padding\n    }],\n    on: {\n      \"click\": function click($event) {\n        $event.stopPropagation();\n        return _vm.select($event);\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"tree-arrow\",\n    \"class\": [{\n      'expanded': _vm.node.states.expanded,\n      'has-child': _vm.node.children.length || _vm.node.isBatch\n    }, _vm.options.direction],\n    on: {\n      \"click\": function click($event) {\n        $event.stopPropagation();\n        return _vm.toggleExpand($event);\n      }\n    }\n  }), _vm._v(\" \"), _vm.options.checkbox ? _c('i', {\n    staticClass: \"tree-checkbox\",\n    \"class\": {\n      'checked': _vm.node.states.checked,\n      'indeterminate': _vm.node.states.indeterminate\n    },\n    on: {\n      \"click\": function click($event) {\n        $event.stopPropagation();\n        return _vm.check($event);\n      }\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('span', {\n    ref: \"anchor\",\n    staticClass: \"tree-anchor\",\n    attrs: {\n      \"tabindex\": \"-1\"\n    },\n    on: {\n      \"focus\": _vm.onNodeFocus,\n      \"dblclick\": function dblclick($event) {\n        return _vm.tree.$emit('node:dblclick', _vm.node);\n      }\n    }\n  }, [_c('node-content', {\n    attrs: {\n      \"node\": _vm.node\n    }\n  })], 1)]), _vm._v(\" \"), _c('transition', {\n    attrs: {\n      \"name\": \"l-fade\"\n    }\n  }, [_vm.hasChildren() && _vm.node.states.expanded ? _c('ul', {\n    staticClass: \"tree-children\"\n  }, _vm._l(_vm.visibleChildren, function (child) {\n    return _c('node', {\n      key: child.id,\n      attrs: {\n        \"node\": child,\n        \"options\": _vm.options\n      }\n    });\n  }), 1) : _vm._e()])], 1);\n};\n\nvar __vue_staticRenderFns__ = [];\n/* style */\n\nvar __vue_inject_styles__$1 = function __vue_inject_styles__$1(inject) {\n  if (!inject) {\n    return;\n  }\n\n  inject(\"data-v-20094490_0\", {\n    source: \".tree-node{white-space:nowrap;display:flex;flex-direction:column;position:relative;box-sizing:border-box}.tree-content{display:flex;align-items:center;padding:3px;cursor:pointer;width:100%;box-sizing:border-box}.tree-node:not(.selected)>.tree-content:hover{background:#f6f8fb}.tree-node.selected>.tree-content{background-color:#e7eef7}.tree-node.disabled>.tree-content:hover{background:inherit}.tree-arrow{flex-shrink:0;height:30px;cursor:pointer;margin-left:30px;width:0}.tree-arrow.has-child{margin-left:0;width:30px;position:relative}.tree-arrow.has-child:after{border:1.5px solid #494646;position:absolute;border-left:0;border-top:0;left:9px;top:50%;height:9px;width:9px;transform:rotate(-45deg) translateY(-50%) translateX(0);transition:transform .25s;transform-origin:center}.tree-arrow.has-child.rtl:after{border:1.5px solid #494646;position:absolute;border-right:0;border-bottom:0;right:0;top:50%;height:9px;width:9px;transform:rotate(-45deg) translateY(-50%) translateX(0);transition:transform .25s;transform-origin:center}.tree-arrow.expanded.has-child:after{transform:rotate(45deg) translateY(-50%) translateX(-5px)}.tree-checkbox{flex-shrink:0;position:relative;width:30px;height:30px;box-sizing:border-box;border:1px solid #dadada;border-radius:2px;background:#fff;transition:border-color .25s,background-color .25s}.tree-arrow:after,.tree-checkbox:after{position:absolute;display:block;content:\\\"\\\"}.tree-checkbox.checked,.tree-checkbox.indeterminate{background-color:#3a99fc;border-color:#218eff}.tree-checkbox.checked:after{box-sizing:content-box;border:1.5px solid #fff;border-left:0;border-top:0;left:9px;top:3px;height:15px;width:8px;transform:rotate(45deg) scaleY(0);transition:transform .25s;transform-origin:center}.tree-checkbox.checked:after{transform:rotate(45deg) scaleY(1)}.tree-checkbox.indeterminate:after{background-color:#fff;top:50%;left:20%;right:20%;height:2px}.tree-anchor{flex-grow:2;outline:0;display:flex;text-decoration:none;color:#343434;vertical-align:top;margin-left:3px;line-height:24px;padding:3px 6px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-node.selected>.tree-content>.tree-anchor{outline:0}.tree-node.disabled>.tree-content>.tree-anchor{color:#989191;background:#fff;opacity:.6;cursor:default;outline:0}.tree-input{display:block;width:100%;height:24px;line-height:24px;outline:0;border:1px solid #3498db;padding:0 4px}.l-fade-enter-active,.l-fade-leave-active{transition:opacity .3s,transform .3s;transform:translateX(0)}.l-fade-enter,.l-fade-leave-to{opacity:0;transform:translateX(-2em)}.tree--small .tree-anchor{line-height:19px}.tree--small .tree-checkbox{width:23px;height:23px}.tree--small .tree-arrow{height:23px}.tree--small .tree-checkbox.checked:after{left:7px;top:3px;height:11px;width:5px}.tree-node.has-child.loading>.tree-content>.tree-arrow,.tree-node.has-child.loading>.tree-content>.tree-arrow:after{border-radius:50%;width:15px;height:15px;border:0}.tree-node.has-child.loading>.tree-content>.tree-arrow{font-size:3px;position:relative;border-top:1.1em solid rgba(45,45,45,.2);border-right:1.1em solid rgba(45,45,45,.2);border-bottom:1.1em solid rgba(45,45,45,.2);border-left:1.1em solid #2d2d2d;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);left:5px;-webkit-animation:loading 1.1s infinite linear;animation:loading 1.1s infinite linear;margin-right:8px}@-webkit-keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}\",\n    map: undefined,\n    media: undefined\n  });\n};\n/* scoped */\n\n\nvar __vue_scope_id__$1 = undefined;\n/* module identifier */\n\nvar __vue_module_identifier__$1 = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__$1 = false;\n/* style inject SSR */\n\nvar TreeNode$1 = normalizeComponent({\n  render: __vue_render__,\n  staticRenderFns: __vue_staticRenderFns__\n}, __vue_inject_styles__$1, __vue_script__$1, __vue_scope_id__$1, __vue_is_functional_template__$1, __vue_module_identifier__$1, createInjector, undefined); //\n//\n//\n//\n//\n//\n\nvar script = {\n  name: 'DragNode',\n  props: ['target'],\n  computed: {\n    style: function style() {\n      if (undefined === this.target.top) {\n        return 'display: none';\n      }\n\n      return \"top: \" + this.target.top + \"px; left: \" + this.target.left + \"px\";\n    }\n  }\n};\n/* script */\n\nvar __vue_script__$2 = script; // For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\n\nscript.__file = \"DraggableNode.vue\";\n/* template */\n\nvar __vue_render__$1 = function __vue_render__$1() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return _c('div', {\n    staticClass: \"tree-dragnode\",\n    style: _vm.style\n  }, [_vm._v(\"\\n  \" + _vm._s(_vm.target.node.text) + \"\\n\")]);\n};\n\nvar __vue_staticRenderFns__$1 = [];\n/* style */\n\nvar __vue_inject_styles__$2 = function __vue_inject_styles__$2(inject) {\n  if (!inject) {\n    return;\n  }\n\n  inject(\"data-v-7a41ac3e_0\", {\n    source: \".tree-dragnode{padding:10px;border:1px solid #e7eef7;position:fixed;border-radius:8px;background:#fff;transform:translate(-50%,-110%);z-index:10}\",\n    map: undefined,\n    media: undefined\n  });\n};\n/* scoped */\n\n\nvar __vue_scope_id__$2 = undefined;\n/* module identifier */\n\nvar __vue_module_identifier__$2 = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__$2 = false;\n/* style inject SSR */\n\nvar DraggableNode = normalizeComponent({\n  render: __vue_render__$1,\n  staticRenderFns: __vue_staticRenderFns__$1\n}, __vue_inject_styles__$2, __vue_script__$2, __vue_scope_id__$2, __vue_is_functional_template__$2, __vue_module_identifier__$2, createInjector, undefined);\n\nfunction recurseDown(obj, fn) {\n  var res;\n\n  if (Array.isArray(obj)) {\n    return obj.map(function (node) {\n      return recurseDown(node, fn);\n    });\n  }\n\n  res = fn(obj); // Recurse children\n\n  if (res !== false && obj.children && obj.children.length) {\n    res = recurseDown(obj.children, fn);\n  }\n\n  return res;\n}\n\nfunction striptags(value) {\n  // ssr fix\n  if (!!document === false) {\n    return value;\n  }\n\n  if (!striptags.__element) {\n    striptags.__element = document.createElement('div');\n  }\n\n  striptags.__element.innerHTML = value;\n  return striptags.__element.innerText;\n}\n\nfunction finder(criteria) {\n  return function (node) {\n    return Object.keys(criteria).every(function (key) {\n      if (key === 'text' || key === 'id') {\n        var c = criteria[key];\n        var val = node[key]; // remove html tags\n\n        val = striptags(val);\n\n        if (isRegExp(c)) {\n          return c.test(val);\n        } else {\n          return c === val;\n        }\n      }\n\n      var states = criteria[key]; // it is possible to pass 'states' or 'state'\n\n      if (key === 'state') {\n        key = 'states';\n      }\n\n      return Object.keys(states).every(function (s) {\n        return node[key][s] === states[s];\n      });\n    });\n  };\n}\n\nfunction isRegExp(val) {\n  return val instanceof RegExp;\n}\n\nfunction getAllChildren(source) {\n  var result = [];\n  source.forEach(function collect(node) {\n    result.push(node);\n\n    if (node.children) {\n      node.children.forEach(collect);\n    }\n  });\n  return result;\n}\n\nfunction find(source, criteria, deep) {\n  if (deep === void 0) deep = true;\n\n  if (!source || !source.length || !criteria) {\n    return null;\n  }\n\n  if (deep) {\n    source = getAllChildren(source);\n  } // find by index\n\n\n  if (typeof criteria === 'number') {\n    return source[criteria] || null;\n  }\n\n  if (typeof criteria === 'string' || criteria instanceof RegExp) {\n    criteria = {\n      text: criteria\n    };\n  }\n\n  if (typeof criteria !== 'function') {\n    criteria = finder(criteria);\n  }\n\n  var result = source.filter(criteria);\n\n  if (result.length) {\n    return result;\n  }\n\n  return null;\n} // it is not genuine GUIDs\n\n\nfunction s4() {\n  return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n}\n\nfunction uuidV4() {\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n}\n\nfunction nodeIterator(context, method) {\n  var args = [],\n      len = arguments.length - 2;\n\n  while (len-- > 0) {\n    args[len] = arguments[len + 2];\n  }\n\n  context.forEach(function (node) {\n    return node[method].apply(node, args);\n  });\n}\n\nvar Selection = /*@__PURE__*/function (Array) {\n  function Selection(tree, items) {\n    var ref;\n    if (items === void 0) items = [];\n    /*eslint semi: 0 */\n\n    Array.call(this);\n    this.tree = tree;\n    (ref = this).push.apply(ref, items);\n  }\n\n  if (Array) Selection.__proto__ = Array;\n  Selection.prototype = Object.create(Array && Array.prototype);\n  Selection.prototype.constructor = Selection;\n\n  Selection.prototype.remove = function remove() {\n    nodeIterator(this, 'remove');\n    return this;\n  };\n\n  Selection.prototype.expand = function expand() {\n    nodeIterator(this, 'expand');\n    return this;\n  };\n\n  Selection.prototype.collapse = function collapse() {\n    nodeIterator(this, 'collapse');\n    return this;\n  };\n\n  Selection.prototype.select = function select(extendList) {\n    nodeIterator(this, 'select', extendList);\n    return this;\n  };\n\n  Selection.prototype.unselect = function unselect() {\n    nodeIterator(this, 'unselect');\n    return this;\n  };\n\n  Selection.prototype.check = function check() {\n    if (this.tree.options.checkbox) {\n      nodeIterator(this, 'check');\n    }\n\n    return this;\n  };\n\n  Selection.prototype.uncheck = function uncheck() {\n    if (this.tree.options.checkbox) {\n      nodeIterator(this, 'uncheck');\n    }\n\n    return this;\n  };\n\n  Selection.prototype.disable = function disable() {\n    nodeIterator(this, 'disable');\n    return this;\n  };\n\n  Selection.prototype.enable = function enable() {\n    nodeIterator(this, 'enable');\n    return this;\n  };\n\n  return Selection;\n}(Array);\n\nvar Node = function Node(tree, item) {\n  if (!item) {\n    throw new Error('Node can not be empty');\n  }\n\n  this.id = item.id || uuidV4();\n  this.states = item.state || {};\n  this.showChildren = true;\n  this.children = item.children || [];\n  this.parent = item.parent || null;\n  this.isBatch = item.isBatch || false;\n  this.isEditing = false;\n  this.data = Object.assign({}, item.data || {}, {\n    text: item.text\n  });\n\n  if (!tree) {\n    throw new Error('Node must have a Tree context!');\n  }\n\n  this.tree = tree;\n};\n\nvar prototypeAccessors = {\n  key: {\n    configurable: true\n  },\n  depth: {\n    configurable: true\n  },\n  text: {\n    configurable: true\n  }\n};\n\nNode.prototype.$emit = function $emit(evnt) {\n  var ref;\n  var args = [],\n      len = arguments.length - 1;\n\n  while (len-- > 0) {\n    args[len] = arguments[len + 1];\n  }\n\n  (ref = this.tree).$emit.apply(ref, [\"node:\" + evnt, this].concat(args));\n};\n\nNode.prototype.getPath = function getPath() {\n  if (!this.parent) {\n    return [this];\n  }\n\n  var path = [this];\n  var el = this;\n\n  while ((el = el.parent) !== null) {\n    path.push(el);\n  }\n\n  return path;\n};\n\nprototypeAccessors.key.get = function () {\n  return this.id + this.text;\n};\n\nprototypeAccessors.depth.get = function () {\n  var depth = 0;\n  var parent = this.parent;\n\n  if (!parent || this.showChildren === false) {\n    return depth;\n  }\n\n  do {\n    depth++;\n  } while (parent = parent.parent);\n\n  return depth;\n};\n\nprototypeAccessors.text.get = function () {\n  return this.data.text;\n};\n\nprototypeAccessors.text.set = function (text) {\n  var oldText = this.text;\n\n  if (oldText !== text) {\n    this.data.text = text;\n    this.$emit('text:changed', text, oldText);\n  }\n};\n\nNode.prototype.setData = function setData(data) {\n  this.data = Object.assign({}, this.data, data);\n  this.$emit('data:changed', this.data);\n  return this.data;\n};\n\nNode.prototype.state = function state(name, value) {\n  if (undefined === value) {\n    return this.states[name];\n  } // TODO: check if it for example `selectable` state it should unselect node\n\n\n  this.states[name] = value;\n  return this;\n};\n\nNode.prototype.recurseUp = function recurseUp(fn, node) {\n  if (node === void 0) node = this;\n\n  if (!node.parent) {\n    return;\n  }\n\n  if (fn(node.parent) !== false) {\n    return this.recurseUp(fn, node.parent);\n  }\n};\n\nNode.prototype.recurseDown = function recurseDown$1(fn, ignoreThis) {\n  if (ignoreThis !== true) {\n    fn(this);\n  }\n\n  if (this.hasChildren()) {\n    recurseDown(this.children, fn);\n  }\n};\n\nNode.prototype.refreshIndeterminateState = function refreshIndeterminateState() {\n  if (!this.tree.options.autoCheckChildren) {\n    return this;\n  }\n\n  this.state('indeterminate', false);\n\n  if (this.hasChildren()) {\n    var childrenCount = this.children.length;\n    var checked = 0;\n    var indeterminate = 0;\n    var disabled = 0;\n    this.children.forEach(function (child) {\n      if (child.checked()) {\n        checked++;\n      }\n\n      if (child.disabled()) {\n        disabled++;\n      }\n\n      if (child.indeterminate()) {\n        indeterminate++;\n      }\n    });\n\n    if (checked > 0 && checked === childrenCount - disabled) {\n      if (!this.checked()) {\n        this.state('checked', true);\n        this.tree.check(this);\n        this.$emit('checked');\n      }\n    } else {\n      if (this.checked()) {\n        this.state('checked', false);\n        this.tree.uncheck(this);\n        this.$emit('unchecked');\n      }\n\n      this.state('indeterminate', indeterminate > 0 || checked > 0 && checked < childrenCount);\n    }\n  }\n\n  if (this.parent) {\n    this.parent.refreshIndeterminateState();\n  }\n};\n\nNode.prototype.indeterminate = function indeterminate() {\n  return this.state('indeterminate');\n};\n\nNode.prototype.editable = function editable() {\n  return !this.state('disabled') && this.state('editable');\n};\n\nNode.prototype.selectable = function selectable() {\n  return !this.state('disabled') && this.state('selectable');\n};\n\nNode.prototype.selected = function selected() {\n  return this.state('selected');\n};\n\nNode.prototype.select = function select(extendList) {\n  if (!this.selectable() || this.selected()) {\n    return this;\n  }\n\n  this.tree.select(this, extendList);\n  this.state('selected', true);\n  this.$emit('selected');\n  return this;\n};\n\nNode.prototype.unselect = function unselect() {\n  if (!this.selectable() || !this.selected()) {\n    return this;\n  }\n\n  this.tree.unselect(this);\n  this.state('selected', false);\n  this.$emit('unselected');\n  return this;\n};\n\nNode.prototype.checked = function checked() {\n  return this.state('checked');\n};\n\nNode.prototype.check = function check() {\n  var this$1 = this;\n\n  if (this.checked() || this.disabled()) {\n    return this;\n  }\n\n  if (this.indeterminate()) {\n    return this.uncheck();\n  }\n\n  var checkDisabledChildren = this.tree.options.checkDisabledChildren;\n  var targetNode = this;\n\n  if (this.tree.options.autoCheckChildren) {\n    this.recurseDown(function (node) {\n      node.state('indeterminate', false);\n\n      if (node.disabled() && !checkDisabledChildren) {\n        return;\n      }\n\n      if (!node.checked()) {\n        this$1.tree.check(node);\n        node.state('checked', true);\n        node.$emit('checked', node.id === targetNode.id ? undefined : targetNode);\n      }\n    });\n\n    if (this.parent) {\n      this.parent.refreshIndeterminateState();\n    }\n  } else {\n    this.tree.check(this);\n    this.state('checked', true);\n    this.$emit('checked');\n  }\n\n  return this;\n};\n\nNode.prototype.uncheck = function uncheck() {\n  var this$1 = this;\n\n  if (!this.indeterminate() && !this.checked() || this.disabled()) {\n    return this;\n  }\n\n  var targetNode = this;\n\n  if (this.tree.options.autoCheckChildren) {\n    this.recurseDown(function (node) {\n      node.state('indeterminate', false);\n\n      if (node.checked()) {\n        this$1.tree.uncheck(node);\n        node.state('checked', false);\n        node.$emit('unchecked', node.id === targetNode.id ? undefined : targetNode);\n      }\n    });\n\n    if (this.parent) {\n      this.parent.refreshIndeterminateState();\n    }\n  } else {\n    this.tree.uncheck(this);\n    this.state('checked', false);\n    this.$emit('unchecked');\n  }\n\n  return this;\n};\n\nNode.prototype.show = function show() {\n  if (this.visible()) {\n    return this;\n  }\n\n  this.state('visible', true);\n  this.$emit('shown');\n  return this;\n};\n\nNode.prototype.hide = function hide() {\n  if (this.hidden()) {\n    return this;\n  }\n\n  this.state('visible', false);\n  this.$emit('hidden');\n  return this;\n};\n\nNode.prototype.visible = function visible() {\n  return this.state('visible');\n};\n\nNode.prototype.hidden = function hidden() {\n  return !this.state('visible');\n};\n\nNode.prototype.enable = function enable() {\n  if (this.enabled()) {\n    return this;\n  }\n\n  if (this.tree.options.autoDisableChildren) {\n    this.recurseDown(function (node) {\n      if (node.disabled()) {\n        node.state('disabled', false);\n        node.$emit('enabled');\n      }\n    });\n  } else {\n    this.state('disabled', false);\n    this.$emit('enabled');\n  }\n\n  return this;\n};\n\nNode.prototype.enabled = function enabled() {\n  return !this.state('disabled');\n};\n\nNode.prototype.disable = function disable() {\n  if (this.disabled()) {\n    return this;\n  }\n\n  if (this.tree.options.autoDisableChildren) {\n    this.recurseDown(function (node) {\n      if (node.enabled()) {\n        node.state('disabled', true);\n        node.$emit('disabled');\n      }\n    });\n  } else {\n    this.state('disabled', true);\n    this.$emit('disabled');\n  }\n\n  return this;\n};\n\nNode.prototype.disabled = function disabled() {\n  return this.state('disabled');\n};\n\nNode.prototype.expandTop = function expandTop(ignoreEvent) {\n  var this$1 = this;\n  this.recurseUp(function (parent) {\n    parent.state('expanded', true);\n\n    if (ignoreEvent !== true) {\n      this$1.$emit('expanded', parent);\n    }\n  });\n};\n\nNode.prototype.expand = function expand() {\n  var this$1 = this;\n\n  if (!this.canExpand()) {\n    return this;\n  }\n\n  if (this.isBatch) {\n    this.tree.loadChildren(this).then(function (_) {\n      this$1.state('expanded', true);\n      this$1.$emit('expanded');\n    });\n  } else {\n    this.state('expanded', true);\n    this.$emit('expanded');\n  }\n\n  return this;\n};\n\nNode.prototype.canExpand = function canExpand() {\n  if (this.disabled() || !this.hasChildren()) {\n    return false;\n  }\n\n  return this.collapsed() && (!this.tree.autoDisableChildren || this.disabled());\n};\n\nNode.prototype.canCollapse = function canCollapse() {\n  if (this.disabled() || !this.hasChildren()) {\n    return false;\n  }\n\n  return this.expanded() && (!this.tree.autoDisableChildren || this.disabled());\n};\n\nNode.prototype.expanded = function expanded() {\n  return this.state('expanded');\n};\n\nNode.prototype.collapse = function collapse() {\n  if (!this.canCollapse()) {\n    return this;\n  }\n\n  this.state('expanded', false);\n  this.$emit('collapsed');\n  return this;\n};\n\nNode.prototype.collapsed = function collapsed() {\n  return !this.state('expanded');\n};\n\nNode.prototype.toggleExpand = function toggleExpand() {\n  return this._toggleOpenedState();\n};\n\nNode.prototype.toggleCollapse = function toggleCollapse() {\n  return this._toggleOpenedState();\n};\n\nNode.prototype._toggleOpenedState = function _toggleOpenedState() {\n  if (this.canCollapse()) {\n    return this.collapse();\n  } else if (this.canExpand()) {\n    return this.expand();\n  }\n};\n\nNode.prototype.isDropable = function isDropable() {\n  return this.enabled() && this.state('dropable');\n};\n\nNode.prototype.isDraggable = function isDraggable() {\n  return this.enabled() && this.state('draggable') && !this.isEditing;\n};\n\nNode.prototype.startDragging = function startDragging() {\n  if (!this.isDraggable() || this.state('dragging')) {\n    return false;\n  } // root element\n\n\n  if (this.isRoot() && this.tree.model.length === 1) {\n    return false;\n  }\n\n  if (this.tree.options.store) {\n    this.tree.__silence = true;\n  }\n\n  this.select();\n  this.state('dragging', true);\n  this.$emit('dragging:start');\n  this.tree.__silence = false;\n  return true;\n};\n\nNode.prototype.finishDragging = function finishDragging(destination, destinationPosition) {\n  if (!destination.isDropable() && destinationPosition === 'drag-on') {\n    return;\n  }\n\n  var tree = this.tree;\n  var clone = this.clone();\n  var parent = this.parent;\n  clone.id = this.id;\n  tree.__silence = true;\n  this.remove();\n\n  if (destinationPosition === 'drag-on') {\n    tree.append(destination, clone);\n  } else if (destinationPosition === 'drag-below') {\n    tree.after(destination, clone);\n  } else if (destinationPosition === 'drag-above') {\n    tree.before(destination, clone);\n  }\n\n  destination.refreshIndeterminateState();\n  parent && parent.refreshIndeterminateState();\n  tree.__silence = false;\n  clone.state('dragging', false);\n  this.state('dragging', false); // need to call emit on the clone, because we need to have node.parent filled in the event listener\n\n  clone.$emit('dragging:finish', destination, destinationPosition);\n\n  if (clone.state('selected')) {\n    tree.selectedNodes.remove(this);\n    tree.selectedNodes.add(clone);\n    tree.vm.$set(this.state, 'selected', false);\n    tree.vm.$set(clone.state, 'selected', true);\n  }\n\n  if (this.tree.options.store) {\n    this.tree.vm.$emit('LIQUOR_NOISE');\n  }\n};\n\nNode.prototype.startEditing = function startEditing() {\n  if (this.disabled()) {\n    return false;\n  }\n\n  if (!this.isEditing) {\n    this.tree._editingNode = this;\n    this.tree.activeElement = this;\n    this.isEditing = true;\n    this.$emit('editing:start');\n  }\n};\n\nNode.prototype.stopEditing = function stopEditing(newText) {\n  if (!this.isEditing) {\n    return;\n  }\n\n  this.isEditing = false;\n  this.tree._editingNode = null;\n  this.tree.activeElement = null;\n  var prevText = this.text;\n\n  if (newText && newText !== false && this.text !== newText) {\n    this.text = newText;\n  }\n\n  this.$emit('editing:stop', prevText);\n};\n\nNode.prototype.index = function index(verbose) {\n  return this.tree.index(this, verbose);\n};\n\nNode.prototype.first = function first() {\n  if (!this.hasChildren()) {\n    return null;\n  }\n\n  return this.children[0];\n};\n\nNode.prototype.last = function last() {\n  if (!this.hasChildren()) {\n    return null;\n  }\n\n  return this.children[this.children.length - 1];\n};\n\nNode.prototype.next = function next() {\n  return this.tree.nextNode(this);\n};\n\nNode.prototype.prev = function prev() {\n  return this.tree.prevNode(this);\n};\n\nNode.prototype.insertAt = function insertAt(node, index) {\n  var this$1 = this;\n  if (index === void 0) index = this.children.length;\n\n  if (!node) {\n    return;\n  }\n\n  node = this.tree.objectToNode(node);\n\n  if (Array.isArray(node)) {\n    node.reverse().map(function (n) {\n      return this$1.insertAt(n, index);\n    });\n    return new Selection(this.tree, [].concat(node));\n  }\n\n  node.parent = this;\n  this.children.splice(index, 0, node);\n\n  if (node.disabled() && node.hasChildren()) {\n    node.recurseDown(function (child) {\n      child.state('disabled', true);\n    });\n  }\n\n  if (!this.isBatch) {\n    this.$emit('added', node);\n  }\n\n  return node;\n};\n\nNode.prototype.addChild = function addChild(node) {\n  return this.insertAt(node);\n};\n\nNode.prototype.append = function append(node) {\n  return this.addChild(node);\n};\n\nNode.prototype.prepend = function prepend(node) {\n  return this.insertAt(node, 0);\n};\n\nNode.prototype.before = function before(node) {\n  return this.tree.before(this, node);\n};\n\nNode.prototype.after = function after(node) {\n  return this.tree.after(this, node);\n};\n\nNode.prototype.empty = function empty() {\n  var node;\n\n  while (node = this.children.pop()) {\n    node.remove();\n  }\n\n  return this;\n};\n\nNode.prototype.remove = function remove() {\n  return this.tree.removeNode(this);\n};\n\nNode.prototype.removeChild = function removeChild(criteria) {\n  var node = this.find(criteria);\n\n  if (node) {\n    return this.tree.removeNode(node);\n  }\n\n  return null;\n};\n\nNode.prototype.find = function find$1(criteria, deep) {\n  if (this.tree.isNode(criteria)) {\n    return criteria;\n  }\n\n  return find(this.children, criteria, deep);\n};\n\nNode.prototype.focus = function focus() {\n  if (this.vm) {\n    this.vm.focus();\n  }\n};\n\nNode.prototype.hasChildren = function hasChildren() {\n  return this.showChildren && this.isBatch || this.children.length > 0;\n};\n/**\r\n* Sometimes it's no need to have a parent. It possible to have more than 1 parent\r\n*/\n\n\nNode.prototype.isRoot = function isRoot() {\n  return this.parent === null;\n};\n\nNode.prototype.clone = function clone() {\n  return this.tree.objectToNode(this.toJSON());\n};\n\nNode.prototype.toJSON = function toJSON() {\n  var this$1 = this;\n  return {\n    text: this.text,\n    data: this.data,\n    state: this.states,\n    children: this.children.map(function (node) {\n      return this$1.tree.objectToNode(node).toJSON();\n    })\n  };\n};\n\nObject.defineProperties(Node.prototype, prototypeAccessors);\n/**\r\n* Default Node's states\r\n*/\n\nvar nodeStates = {\n  selected: false,\n  selectable: true,\n  checked: false,\n  expanded: false,\n  disabled: false,\n  visible: true,\n  indeterminate: false,\n  matched: false,\n  editable: true,\n  dragging: false,\n  draggable: true,\n  dropable: true\n};\n\nfunction merge(state) {\n  if (state === void 0) state = {};\n  return Object.assign({}, nodeStates, state);\n}\n\nfunction objectToNode(tree, obj) {\n  var node = null;\n\n  if (obj instanceof Node) {\n    return obj;\n  }\n\n  if (typeof obj === 'string') {\n    node = new Node(tree, {\n      text: obj,\n      state: merge(),\n      id: uuidV4()\n    });\n  } else if (Array.isArray(obj)) {\n    return obj.map(function (o) {\n      return objectToNode(tree, o);\n    });\n  } else {\n    node = new Node(tree, obj);\n    node.states = merge(node.states);\n\n    if (!node.id) {\n      node.id = uuidV4();\n    }\n\n    if (node.children.length) {\n      node.children = node.children.map(function (child) {\n        child = objectToNode(tree, child);\n        child.parent = node;\n        return child;\n      });\n    }\n  }\n\n  return node;\n}\n\nvar List = /*@__PURE__*/function (Array) {\n  function List() {\n    Array.apply(this, arguments);\n  }\n\n  if (Array) List.__proto__ = Array;\n  List.prototype = Object.create(Array && Array.prototype);\n  List.prototype.constructor = List;\n\n  List.prototype.empty = function empty() {\n    this.splice(0, this.length);\n    return this;\n  };\n\n  List.prototype.has = function has(item) {\n    return this.includes(item);\n  };\n\n  List.prototype.add = function add() {\n    var ref;\n    var items = [],\n        len = arguments.length;\n\n    while (len--) {\n      items[len] = arguments[len];\n    }\n\n    (ref = this).push.apply(ref, items);\n    return this;\n  };\n\n  List.prototype.remove = function remove(item) {\n    var index = this.indexOf(item);\n\n    if (index === -1) {\n      return this;\n    }\n\n    this.splice(index, 1);\n    return this;\n  };\n\n  List.prototype.removeAll = function removeAll(item) {\n    while (this.includes(item)) {\n      this.remove(item);\n    }\n\n    return this;\n  };\n\n  List.prototype.top = function top() {\n    return this[this.length - 1];\n  };\n\n  return List;\n}(Array);\n/**\r\n  Every Node has certain format:\r\n  {\r\n    id,           // Unique Node id. By default it generates using uuidV4\r\n    text,         // Node text\r\n    children,     // List of children. Each children has the same format\r\n    parent,       // Parent Node or null. The tree is able to have more than 1 root node\r\n    state,        // States of Node. Ex.: selected, checked and so on\r\n    data          // Any types of data. It is similar to `storage`.\r\n                  // Ex.: data: {myAwesomeProperty: 10}. To get this property you need: Node.data('myAwesomeProperty')\r\n  }\r\n*/\n\n\nvar defaultPropertyNames = {\n  id: 'id',\n  text: 'text',\n  children: 'children',\n  state: 'state',\n  data: 'data',\n  isBatch: 'isBatch'\n};\n\nfunction convertNames(obj, names) {\n  return {\n    id: obj[names.id],\n    text: obj[names.text],\n    children: obj[names.children],\n    state: obj[names.state],\n    data: obj[names.data],\n    isBatch: obj[names.isBatch]\n  };\n}\n\nvar TreeParser = {\n  parse: function parse(data, tree, options) {\n    if (options === void 0) options = {};\n\n    if (typeof data === 'string') {\n      data = JSON.parse(data);\n    }\n\n    if (!Array.isArray(data)) {\n      data = [data];\n    }\n\n    var p = Object.assign({}, defaultPropertyNames, options);\n    var preparedItems = data.map(function converter(item) {\n      var convertedItem = convertNames(item, p); // Possible to receive 1 child like a simple object. It must be converted to an array\n      // We do not have checks on the correctness of the format. A developer should pass correct format\n\n      if (convertedItem.children && !Array.isArray(convertedItem.children)) {\n        convertedItem.children = [convertedItem.children];\n      }\n\n      if (convertedItem.children) {\n        convertedItem.children = convertedItem.children.map(converter);\n      }\n\n      return convertedItem;\n    });\n    return preparedItems.map(function (item) {\n      return objectToNode(tree, item);\n    });\n  }\n};\n/*eslint no-undef: 0 */\n\nfunction request(url) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.addEventListener('load', function (_) {\n      try {\n        var response = JSON.parse(xhr.response);\n        resolve(response);\n      } catch (e) {\n        reject(e);\n      }\n    });\n    xhr.send(null);\n  });\n}\n\nfunction get(url) {\n  return request(url);\n}\n\nfunction createTemplate(template) {\n  return function (source) {\n    var re = /{([^}]+)}/;\n    var m;\n    var result = template;\n\n    while (m = re.exec(result)) {\n      result = result.replace(m[0], source[m[1]]);\n    }\n\n    return result;\n  };\n}\n\nfunction orderAsc(node0, node1) {\n  if (node0.text < node1.text) {\n    return -1;\n  }\n\n  if (node0.text > node1.text) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction orderDesc(node0, node1) {\n  if (node0.text < node1.text) {\n    return 1;\n  }\n\n  if (node0.text > node1.text) {\n    return -1;\n  }\n\n  return 0;\n}\n\nfunction getCompareFunction(order) {\n  switch (order.toLowerCase()) {\n    case 'asc':\n      return orderAsc;\n\n    case 'desc':\n      return orderDesc;\n  }\n}\n\nfunction sort(source, compareFunction) {\n  if (typeof compareFunction === 'string') {\n    compareFunction = getCompareFunction(compareFunction);\n  }\n\n  if (Array.isArray(source) && typeof compareFunction === 'function') {\n    source.sort(compareFunction);\n  }\n}\n\nfunction fetchDelay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n}\n\nvar Tree = function Tree(vm) {\n  var this$1 = this;\n  this.vm = vm;\n  this.options = vm.opts;\n  this.activeElement = null; // We have to convert 'fetchData' to function. It must return Promise always\n\n  var fetchData = this.options.fetchData;\n\n  if (typeof fetchData === 'string') {\n    this.options.fetchData = function (template) {\n      var urlTemplate = createTemplate(template);\n      return function (node) {\n        return get(urlTemplate(node))[\"catch\"](this$1.options.onFetchError);\n      };\n    }(fetchData);\n  }\n};\n\nTree.prototype.$on = function $on(name) {\n  var ref;\n  var args = [],\n      len = arguments.length - 1;\n\n  while (len-- > 0) {\n    args[len] = arguments[len + 1];\n  }\n\n  (ref = this.vm).$on.apply(ref, [name].concat(args));\n};\n\nTree.prototype.$once = function $once(name) {\n  var ref;\n  var args = [],\n      len = arguments.length - 1;\n\n  while (len-- > 0) {\n    args[len] = arguments[len + 1];\n  }\n\n  (ref = this.vm).$once.apply(ref, [name].concat(args));\n};\n\nTree.prototype.$off = function $off(name) {\n  var ref;\n  var args = [],\n      len = arguments.length - 1;\n\n  while (len-- > 0) {\n    args[len] = arguments[len + 1];\n  }\n\n  (ref = this.vm).$off.apply(ref, [name].concat(args));\n};\n\nTree.prototype.$emit = function $emit(name) {\n  var ref;\n  var args = [],\n      len = arguments.length - 1;\n\n  while (len-- > 0) {\n    args[len] = arguments[len + 1];\n  }\n\n  if (this.__silence) {\n    return;\n  }\n\n  (ref = this.vm).$emit.apply(ref, [name].concat(args));\n\n  if (this.options.store) {\n    this.vm.$emit('LIQUOR_NOISE');\n  }\n};\n\nTree.prototype._sort = function _sort(source, compareFn, deep) {\n  if (deep !== false) {\n    this.recurseDown(source, function (node) {\n      if (node.hasChildren()) {\n        sort(node.children, compareFn);\n      }\n    });\n  }\n\n  sort(source, compareFn);\n};\n\nTree.prototype.sortTree = function sortTree(compareFn, deep) {\n  this._sort(this.model, compareFn, deep);\n};\n\nTree.prototype.sort = function sort$$1(query, compareFn, deep) {\n  var this$1 = this;\n  var targetNode = this.find(query, true);\n\n  if (!targetNode || !compareFn) {\n    return;\n  }\n\n  targetNode.forEach(function (node) {\n    this$1._sort(node.children, compareFn, deep);\n  });\n};\n\nTree.prototype.clearFilter = function clearFilter() {\n  this.recurseDown(function (node) {\n    node.state('matched', false);\n    node.state('visible', true);\n    node.state('expanded', node.__expanded);\n    node.__expanded = undefined;\n    node.showChildren = true;\n  });\n  this.vm.matches.length = 0;\n  this.vm.$emit('tree:filtered', [], '');\n};\n\nTree.prototype.filter = function filter(query) {\n  if (!query) {\n    return this.clearFilter();\n  }\n\n  var matches = [];\n  var predicate = this.options.filter.matcher;\n  var ref = this.options.filter;\n  var showChildren = ref.showChildren;\n  var plainList = ref.plainList; // collect nodes\n\n  this.recurseDown(function (node) {\n    if (predicate(query, node)) {\n      matches.push(node);\n    }\n\n    node.showChildren = true; // save prev `expanded` state\n\n    if (undefined === node.__expanded) {\n      node.__expanded = node.state('expanded');\n    }\n\n    node.state('visible', false);\n    node.state('matched', false);\n    node.state('expanded', true);\n  });\n  matches.reverse().forEach(function (node) {\n    node.state('matched', true);\n    node.state('visible', true);\n    node.showChildren = !plainList;\n\n    if (node.hasChildren()) {\n      node.recurseDown(function (n) {\n        n.state('visible', !!showChildren);\n      }, true);\n    }\n\n    node.recurseUp(function (parent) {\n      parent.state('visible', true);\n      parent.state('expanded', true);\n    });\n\n    if (node.hasChildren()) {\n      node.state('expanded', false);\n    }\n  });\n  this.vm.matches = matches;\n  this.vm.$emit('tree:filtered', matches, query);\n  return matches;\n};\n\nTree.prototype.selected = function selected() {\n  return new (Function.prototype.bind.apply(Selection, [null].concat([this], this.selectedNodes)))();\n};\n\nTree.prototype.checked = function checked() {\n  if (!this.options.checkbox) {\n    return null;\n  }\n\n  return new (Function.prototype.bind.apply(Selection, [null].concat([this], this.checkedNodes)))();\n};\n\nTree.prototype.loadChildren = function loadChildren(node) {\n  var this$1 = this;\n\n  if (!node) {\n    return;\n  }\n\n  this.$emit('tree:data:fetch', node);\n\n  if (this.options.minFetchDelay > 0 && node.vm) {\n    node.vm.loading = true;\n  }\n\n  var result = this.fetch(node).then(function (children) {\n    node.append(children);\n    node.isBatch = false;\n\n    if (this$1.options.autoCheckChildren) {\n      if (node.checked()) {\n        node.recurseDown(function (child) {\n          child.state('checked', true);\n        });\n      }\n\n      node.refreshIndeterminateState();\n    }\n\n    this$1.$emit('tree:data:received', node);\n  });\n  return Promise.all([fetchDelay(this.options.minFetchDelay), result]).then(function (_) {\n    if (node.vm) {\n      node.vm.loading = false;\n    }\n\n    return result;\n  });\n};\n\nTree.prototype.fetch = function fetch(node, parseData) {\n  var this$1 = this;\n  var result = this.options.fetchData(node);\n\n  if (!result.then) {\n    result = get(result)[\"catch\"](this.options.onFetchError);\n  }\n\n  if (parseData === false) {\n    return result;\n  }\n\n  return result.then(function (data) {\n    try {\n      return this$1.parse(data, this$1.options.modelParse);\n    } catch (e) {\n      throw new Error(e);\n    }\n  })[\"catch\"](this.options.onFetchError);\n};\n\nTree.prototype.fetchInitData = function fetchInitData() {\n  // simulate root node\n  var node = {\n    id: 'root',\n    name: 'root'\n  };\n  return this.fetch(node, false);\n};\n\nTree.prototype.setModel = function setModel(data) {\n  var this$1 = this;\n  return new Promise(function (resolve) {\n    this$1.model = this$1.parse(data, this$1.options.modelParse);\n    /* eslint-disable */\n\n    requestAnimationFrame(function (_) {\n      this$1.vm.model = this$1.model;\n      resolve();\n    });\n    /* eslint-enable */\n\n    /**\r\n    * VueJS transform properties to reactives when constructor is running\r\n    * And we lose List object (extended from Array)\r\n    */\n\n    this$1.selectedNodes = new List();\n    this$1.checkedNodes = new List();\n    recurseDown(this$1.model, function (node) {\n      node.tree = this$1;\n\n      if (node.selected()) {\n        this$1.selectedNodes.add(node);\n      }\n\n      if (node.checked()) {\n        this$1.checkedNodes.add(node);\n\n        if (node.parent) {\n          node.parent.refreshIndeterminateState();\n        }\n      }\n\n      if (this$1.options.autoDisableChildren && node.disabled()) {\n        node.recurseDown(function (child) {\n          child.state('disabled', true);\n        });\n      }\n    });\n\n    if (!this$1.options.multiple && this$1.selectedNodes.length) {\n      var top = this$1.selectedNodes.top();\n      this$1.selectedNodes.forEach(function (node) {\n        if (top !== node) {\n          node.state('selected', false);\n        }\n      });\n      this$1.selectedNodes.empty().add(top);\n    } // Nodes can't be selected on init. By it's possible to select through API\n\n\n    if (this$1.options.checkOnSelect && this$1.options.checkbox) {\n      this$1.unselectAll();\n    }\n  });\n};\n\nTree.prototype.recurseDown = function recurseDown$1(node, fn) {\n  if (!fn && node) {\n    fn = node;\n    node = this.model;\n  }\n\n  return recurseDown(node, fn);\n};\n\nTree.prototype.select = function select(node, extendList) {\n  var treeNode = this.getNode(node);\n\n  if (!treeNode) {\n    return false;\n  }\n\n  if (this.options.multiple && extendList) {\n    this.selectedNodes.add(treeNode);\n  } else {\n    this.unselectAll();\n    this.selectedNodes.empty().add(treeNode);\n  }\n\n  return true;\n};\n\nTree.prototype.selectAll = function selectAll() {\n  var this$1 = this;\n\n  if (!this.options.multiple) {\n    return false;\n  }\n\n  this.selectedNodes.empty();\n  this.recurseDown(function (node) {\n    this$1.selectedNodes.add(node.select(true));\n  });\n  return true;\n};\n\nTree.prototype.unselect = function unselect(node) {\n  var treeNode = this.getNode(node);\n\n  if (!treeNode) {\n    return false;\n  }\n\n  this.selectedNodes.remove(treeNode);\n  return true;\n};\n\nTree.prototype.unselectAll = function unselectAll() {\n  var node;\n\n  while (node = this.selectedNodes.pop()) {\n    node.unselect();\n  }\n\n  return true;\n};\n\nTree.prototype.check = function check(node) {\n  this.checkedNodes.add(node);\n};\n\nTree.prototype.uncheck = function uncheck(node) {\n  this.checkedNodes.remove(node);\n};\n\nTree.prototype.checkAll = function checkAll() {\n  this.recurseDown(function (node) {\n    if (node.depth === 0) {\n      if (node.indeterminate()) {\n        node.state('indeterminate', false);\n      }\n\n      node.check();\n    }\n  });\n};\n\nTree.prototype.uncheckAll = function uncheckAll() {\n  var node;\n\n  while (node = this.checkedNodes.pop()) {\n    node.uncheck();\n  }\n\n  return true;\n};\n\nTree.prototype.expand = function expand(node) {\n  if (node.expanded()) {\n    return false;\n  }\n\n  node.expand();\n  return true;\n};\n\nTree.prototype.collapse = function collapse(node) {\n  if (node.collapsed()) {\n    return false;\n  }\n\n  node.collapse();\n  return true;\n};\n\nTree.prototype.toggleExpand = function toggleExpand(node) {\n  if (!node.hasChildren()) {\n    return false;\n  }\n\n  node.toggleExpand();\n  return true;\n};\n\nTree.prototype.toggleCollapse = function toggleCollapse(node) {\n  if (!node.hasChildren()) {\n    return false;\n  }\n\n  node.toggleCollapse();\n  return true;\n};\n\nTree.prototype.expandAll = function expandAll() {\n  this.recurseDown(function (node) {\n    if (node.hasChildren() && node.collapsed()) {\n      node.expand();\n    }\n  });\n};\n\nTree.prototype.collapseAll = function collapseAll() {\n  this.recurseDown(function (node) {\n    if (node.hasChildren() && node.expanded()) {\n      node.collapse();\n    }\n  });\n};\n\nTree.prototype.index = function index(node, verbose) {\n  var target = node.parent;\n\n  if (target) {\n    target = target.children;\n  } else {\n    target = this.model;\n  }\n\n  var index = target.indexOf(node);\n\n  if (verbose) {\n    return {\n      index: index,\n      target: target,\n      node: target[index]\n    };\n  }\n\n  return index;\n};\n\nTree.prototype.nextNode = function nextNode(node) {\n  var ref = this.index(node, true);\n  var target = ref.target;\n  var index = ref.index;\n  return target[index + 1] || null;\n};\n\nTree.prototype.nextVisibleNode = function nextVisibleNode(node) {\n  if (node.hasChildren() && node.expanded()) {\n    return node.first();\n  }\n\n  var nextNode = this.nextNode(node);\n\n  if (!nextNode && node.parent) {\n    return node.parent.next();\n  }\n\n  return nextNode;\n};\n\nTree.prototype.prevNode = function prevNode(node) {\n  var ref = this.index(node, true);\n  var target = ref.target;\n  var index = ref.index;\n  return target[index - 1] || null;\n};\n\nTree.prototype.prevVisibleNode = function prevVisibleNode(node) {\n  var prevNode = this.prevNode(node);\n\n  if (!prevNode) {\n    return node.parent;\n  }\n\n  if (prevNode.hasChildren() && prevNode.expanded()) {\n    return prevNode.last();\n  }\n\n  return prevNode;\n};\n\nTree.prototype.addToModel = function addToModel(node, index) {\n  var this$1 = this;\n  if (index === void 0) index = this.model.length;\n  node = this.objectToNode(node);\n  this.model.splice(index, 0, node);\n  this.recurseDown(node, function (n) {\n    n.tree = this$1;\n  });\n  this.$emit('node:added', node);\n  return node;\n};\n\nTree.prototype.append = function append(criteria, node) {\n  var targetNode = this.find(criteria);\n\n  if (targetNode) {\n    return targetNode.append(node);\n  }\n\n  return false;\n};\n\nTree.prototype.prepend = function prepend(criteria, node) {\n  var targetNode = this.find(criteria);\n\n  if (targetNode) {\n    return targetNode.prepend(node);\n  }\n\n  return false;\n};\n\nTree.prototype.before = function before(targetNode, sourceNode) {\n  targetNode = this.find(targetNode);\n  var position = this.index(targetNode, true);\n  var node = this.objectToNode(sourceNode);\n\n  if (!~position.index) {\n    return false;\n  }\n\n  position.target.splice(position.index, 0, node);\n  node.parent = targetNode.parent;\n  this.$emit('node:added', node);\n  return node;\n};\n\nTree.prototype.after = function after(targetNode, sourceNode) {\n  targetNode = this.find(targetNode);\n  var position = this.index(targetNode, true);\n  var node = this.objectToNode(sourceNode);\n\n  if (!~position.index) {\n    return false;\n  }\n\n  position.target.splice(position.index + 1, 0, node);\n  node.parent = targetNode.parent;\n  this.$emit('node:added', node);\n  return node;\n};\n\nTree.prototype.addNode = function addNode(node) {\n  var index = this.model.length;\n  node = objectToNode(node);\n  this.model.splice(index, 0, node);\n  this.$emit('node:added', node);\n  return node;\n};\n\nTree.prototype.remove = function remove(criteria, multiple) {\n  return this.removeNode(this.find(criteria, multiple));\n};\n\nTree.prototype.removeNode = function removeNode(node) {\n  if (node instanceof Selection) {\n    return node.remove();\n  }\n\n  if (!node) {\n    return false;\n  }\n\n  if (!node.parent) {\n    if (~this.model.indexOf(node)) {\n      this.model.splice(this.model.indexOf(node), 1);\n    }\n  } else {\n    var children = node.parent.children;\n\n    if (~children.indexOf(node)) {\n      children.splice(children.indexOf(node), 1);\n    }\n  }\n\n  if (node.parent) {\n    if (node.parent.indeterminate() && !node.parent.hasChildren()) {\n      node.parent.state('indeterminate', false);\n    }\n  }\n\n  if (this.activeElement !== null) {\n    if (node.id === this.activeElement.id) {\n      this.activeElement = null;\n    }\n  }\n\n  node.parent = null;\n  this.$emit('node:removed', node);\n  this.selectedNodes.remove(node);\n  this.checkedNodes.remove(node);\n  var matches = this.vm.matches;\n\n  if (matches && matches.length) {\n    if (matches.includes(node)) {\n      matches.splice(matches.indexOf(node), 1);\n    }\n  }\n\n  return node;\n};\n\nTree.prototype.isNode = function isNode(node) {\n  return node instanceof Node;\n};\n\nTree.prototype.find = function find$1(criteria, multiple) {\n  if (this.isNode(criteria)) {\n    return criteria;\n  }\n\n  var result = find(this.model, criteria);\n\n  if (!result || !result.length) {\n    return new Selection(this, []);\n  }\n\n  if (multiple === true) {\n    return new Selection(this, result);\n  }\n\n  return new Selection(this, [result[0]]);\n};\n\nTree.prototype.updateData = function updateData(criteria, callback) {\n  var nodes = this.find(criteria);\n  nodes.forEach(function (node) {\n    return node.setData(callback(node));\n  });\n  return nodes;\n};\n\nTree.prototype.getNodeById = function getNodeById(id) {\n  var targetNode = null;\n  recurseDown(this.model, function (node) {\n    if ('' + node.id === id) {\n      targetNode = node;\n      return false;\n    }\n  });\n  return targetNode;\n};\n\nTree.prototype.getNode = function getNode(node) {\n  if (this.isNode(node)) {\n    return node;\n  }\n\n  return null;\n};\n\nTree.prototype.objectToNode = function objectToNode$1(obj) {\n  return objectToNode(this, obj);\n};\n\nTree.prototype.parse = function parse(data, options) {\n  if (!options) {\n    options = this.options.propertyNames;\n  }\n\n  try {\n    return TreeParser.parse(data, this, options);\n  } catch (e) {\n    return [];\n  }\n};\n\nvar keyCodes = {\n  'ARROW_LEFT': 37,\n  'ARROW_TOP': 38,\n  'ARROW_RIGHT': 39,\n  'ARROW_BOTTOM': 40,\n  'SPACE': 32,\n  'DELETE': 46,\n  'ENTER': 13,\n  'ESC': 27\n};\nvar codesArr = [37, 38, 39, 40, 32];\n\nfunction focusUp(tree, node) {\n  var prevNode = tree.prevVisibleNode(node);\n\n  if (!prevNode) {\n    return;\n  }\n\n  if (prevNode.disabled()) {\n    return focusUp(tree, prevNode);\n  }\n\n  prevNode.focus();\n}\n\nfunction focusdDown(tree, node) {\n  var nextNode = tree.nextVisibleNode(node);\n\n  if (!nextNode) {\n    return;\n  }\n\n  if (nextNode.disabled()) {\n    return focusdDown(tree, nextNode);\n  }\n\n  nextNode.focus();\n}\n\nfunction checkNode(tree, node) {\n  if (!tree.options.checkbox) {\n    return;\n  }\n\n  if (node.checked()) {\n    node.uncheck();\n  } else {\n    node.check();\n  }\n}\n\nfunction leftArrow(tree, node) {\n  if (node.expanded()) {\n    node.collapse();\n  } else {\n    var parent = node.parent;\n\n    if (parent) {\n      parent.focus();\n    }\n  }\n}\n\nfunction rightArrow(tree, node) {\n  if (node.collapsed()) {\n    node.expand();\n  } else {\n    var first = node.first();\n\n    if (first) {\n      first.focus();\n    }\n  }\n}\n\nfunction deleteNode(tree, node) {\n  var deletion = tree.options.deletion;\n\n  if (deletion) {\n    if (typeof deletion === 'function') {\n      if (deletion(node) === true) {\n        node.remove();\n      }\n    } else if (deletion === true) {\n      node.remove();\n    }\n  }\n}\n\nfunction initKeyboardNavigation(tree) {\n  var vm = tree.vm;\n  var $el = vm.$el;\n  $el.addEventListener('keydown', function (e) {\n    var code = e.keyCode;\n    var node = tree.activeElement;\n\n    if (!tree.isNode(node)) {\n      return;\n    }\n\n    if (node.isEditing) {\n      switch (code) {\n        case keyCodes.ESC:\n          return node.stopEditing(false);\n      }\n    } else {\n      if (codesArr.includes(code)) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      switch (code) {\n        case keyCodes.ARROW_LEFT:\n          return leftArrow(tree, node);\n\n        case keyCodes.ARROW_RIGHT:\n          return rightArrow(tree, node);\n\n        case keyCodes.ARROW_TOP:\n          return focusUp(tree, node);\n\n        case keyCodes.ARROW_BOTTOM:\n          return focusdDown(tree, node);\n\n        case keyCodes.SPACE:\n        case keyCodes.ENTER:\n          return checkNode(tree, node);\n\n        case keyCodes.DELETE:\n          return deleteNode(tree, node);\n      }\n    }\n  }, true);\n}\n\nfunction assert(truth, message) {\n  if (truth === false) {\n    throw new Error(message);\n  }\n}\n\nfunction initEvents(vm) {\n  var ref = vm.opts;\n  var multiple = ref.multiple;\n  var checkbox = ref.checkbox;\n  var tree = vm.tree;\n\n  var emitter = function emitter(obj) {\n    var selected = vm.selected();\n\n    if (!checkbox) {\n      vm.$emit('input', multiple ? selected : selected[0] || null);\n    } else {\n      vm.$emit('input', {\n        selected: multiple ? selected : selected[0] || null,\n        checked: vm.checked()\n      });\n    }\n  };\n\n  emitter();\n  tree.$on('node:selected', emitter);\n  tree.$on('node:unselected', emitter);\n\n  if (checkbox) {\n    tree.$on('node:checked', emitter);\n    tree.$on('node:unchecked', emitter);\n  }\n\n  tree.$on('node:added', function (targetNode, newNode) {\n    var node = newNode || targetNode;\n\n    if (checkbox) {\n      if (node.state('checked') && !tree.checkedNodes.has(node)) {\n        tree.checkedNodes.add(node);\n      }\n\n      node.refreshIndeterminateState();\n    }\n\n    if (node.state('selected') && !tree.selectedNodes.has(node)) {\n      tree.select(node);\n    }\n\n    emitter();\n  });\n}\n\nvar TreeMixin = {\n  mounted: function mounted() {\n    var this$1 = this;\n    var tree = new Tree(this);\n    var dataProvider;\n    this.tree = tree;\n    this._provided.tree = tree;\n\n    if (!this.data && this.opts.fetchData) {\n      // Get initial data if we don't have a data directly\n      // In this case we call 'fetcher' with node.id == 'root' && node.name == 'root'\n      dataProvider = tree.fetchInitData();\n    } else if (this.data && this.data.then) {\n      // Yeah... nice check!\n      dataProvider = this.data;\n      this.loading = true;\n    } else {\n      dataProvider = Promise.resolve(this.data);\n    }\n\n    dataProvider.then(function (data) {\n      if (!data) {\n        data = [];\n      }\n\n      if (this$1.opts.store) {\n        this$1.connectStore(this$1.opts.store);\n      } else {\n        this$1.tree.setModel(data);\n      }\n\n      if (this$1.loading) {\n        this$1.loading = false;\n      }\n\n      this$1.$emit('tree:mounted', this$1);\n      initEvents(this$1);\n    });\n\n    if (this.opts.keyboardNavigation !== false) {\n      initKeyboardNavigation(tree);\n    }\n  },\n  methods: {\n    connectStore: function connectStore(store) {\n      var this$1 = this;\n      var Store = store.store;\n      var mutations = store.mutations;\n      var getter = store.getter;\n      var dispatcher = store.dispatcher;\n      assert(typeof getter === 'function', '`getter` must be a function');\n      assert(typeof dispatcher === 'function', '`dispatcher` must be a function');\n\n      if (undefined !== mutations) {\n        assert(Array.isArray(mutations), '`mutations` must be an array');\n      }\n\n      Store.subscribe(function (action, state) {\n        if (!mutations) {\n          this$1.tree.setModel(getter());\n        } else if (mutations.includes(action.type)) {\n          this$1.tree.setModel(getter());\n        }\n      });\n      this.tree.setModel(getter());\n      this.$on('LIQUOR_NOISE', function () {\n        this$1.$nextTick(function (_) {\n          dispatcher(this$1.toJSON());\n        });\n      });\n    },\n    recurseDown: function recurseDown(fn) {\n      this.tree.recurseDown(fn);\n    },\n    selected: function selected() {\n      return this.tree.selected();\n    },\n    checked: function checked() {\n      return this.tree.checked();\n    },\n    append: function append(criteria, node) {\n      // append to model\n      if (!node) {\n        return this.tree.addToModel(criteria, this.tree.model.length);\n      }\n\n      return this.tree.append(criteria, node);\n    },\n    prepend: function prepend(criteria, node) {\n      if (!node) {\n        return this.tree.addToModel(criteria, 0);\n      }\n\n      return this.tree.prepend(criteria, node);\n    },\n    addChild: function addChild(criteria, node) {\n      return this.append(criteria, node);\n    },\n    remove: function remove(criteria, multiple) {\n      return this.tree.remove(criteria, multiple);\n    },\n    before: function before(criteria, node) {\n      if (!node) {\n        return this.prepend(criteria);\n      }\n\n      return this.tree.before(criteria, node);\n    },\n    after: function after(criteria, node) {\n      if (!node) {\n        return this.append(criteria);\n      }\n\n      return this.tree.after(criteria, node);\n    },\n    find: function find(criteria, multiple) {\n      return this.tree.find(criteria, multiple);\n    },\n    findAll: function findAll(criteria) {\n      return this.tree.find(criteria, true);\n    },\n    expandAll: function expandAll() {\n      return this.tree.expandAll();\n    },\n    updateData: function updateData(criteria, callback) {\n      return this.tree.updateData(criteria, callback);\n    },\n    collapseAll: function collapseAll() {\n      return this.tree.collapseAll();\n    },\n    sortTree: function sortTree(compareFn, deep) {\n      return this.tree.sortTree(compareFn, deep);\n    },\n    sort: function sort() {\n      var ref;\n      var args = [],\n          len = arguments.length;\n\n      while (len--) {\n        args[len] = arguments[len];\n      }\n\n      return (ref = this.tree).sort.apply(ref, args);\n    },\n    setModel: function setModel(data) {\n      return this.tree.setModel(data);\n    },\n    getRootNode: function getRootNode() {\n      return this.tree.model.length === 1 ? this.tree.model[0] : this.tree.model;\n    },\n    toJSON: function toJSON() {\n      return JSON.parse(JSON.stringify(this.model));\n    }\n  }\n  /*eslint semi: 0 */\n\n  /* https://github.com/vuejs/rollup-plugin-vue/issues/169 */\n\n};\nvar DropPosition = {\n  ABOVE: 'drag-above',\n  BELOW: 'drag-below',\n  ON: 'drag-on'\n};\n\nfunction isMovingStarted(event, start) {\n  return Math.abs(event.clientX - start[0]) > 5 || Math.abs(event.clientY - start[1]) > 5;\n}\n\nfunction composedPath(event) {\n  var el = event.target;\n  var path = [];\n\n  while (el) {\n    path.push(el);\n\n    if (el.tagName === 'HTML') {\n      path.push(document);\n      path.push(window);\n      return path;\n    }\n\n    el = el.parentElement;\n  }\n\n  return path;\n}\n\nfunction getPath(event) {\n  if (event.path) {\n    return event.path;\n  }\n\n  if (event.composedPath) {\n    return event.composedPath();\n  }\n\n  return composedPath(event);\n}\n\nfunction getSelectedNode(event) {\n  var className;\n  var i = 0;\n  var path = getPath(event);\n\n  for (; i < path.length; i++) {\n    className = path[i].className || '';\n\n    if (/tree-node/.test(className)) {\n      return path[i];\n    }\n  }\n\n  return null;\n}\n\nfunction getDropDestination(e) {\n  var selectedNode = getSelectedNode(e);\n\n  if (!selectedNode) {\n    return null;\n  }\n\n  return selectedNode;\n}\n\nfunction updateHelperClasses(target, classes) {\n  if (!target) {\n    return;\n  }\n\n  var className = target.className;\n\n  if (!classes) {\n    for (var i in DropPosition) {\n      className = className.replace(DropPosition[i], '');\n    }\n\n    className.replace('dragging', '');\n  } else if (!new RegExp(classes).test(className)) {\n    className += ' ' + classes;\n  }\n\n  target.className = className.replace(/\\s+/g, ' ');\n}\n\nfunction getDropPosition(e, element) {\n  var coords = element.getBoundingClientRect();\n  var nodeSection = coords.height / 3;\n  var dropPosition = DropPosition.ON;\n\n  if (coords.top + nodeSection >= e.clientY) {\n    dropPosition = DropPosition.ABOVE;\n  } else if (coords.top + nodeSection * 2 <= e.clientY) {\n    dropPosition = DropPosition.BELOW;\n  }\n\n  return dropPosition;\n}\n\nfunction callDndCb(args, opts, method) {\n  if (!opts || !opts[method] || typeof opts[method] !== 'function') {\n    return;\n  }\n\n  return opts[method].apply(opts, args) !== false;\n}\n\nfunction clearDropClasses(parent) {\n  for (var key in DropPosition) {\n    var el = parent.querySelectorAll(\".\" + DropPosition[key]);\n\n    for (var i = 0; i < el.length; i++) {\n      updateHelperClasses(el[i]);\n    }\n  }\n}\n\nvar TreeDnd = {\n  methods: {\n    onDragStart: function onDragStart(e) {\n      e.preventDefault();\n    },\n    startDragging: function startDragging(node, event) {\n      if (!node.isDraggable() || callDndCb([node], this.tree.options.dnd, 'onDragStart') === false) {\n        return;\n      }\n\n      this.$$startDragPosition = [event.clientX, event.clientY];\n      this.$$possibleDragNode = node;\n      this.initDragListeners();\n    },\n    initDragListeners: function initDragListeners() {\n      var this$1 = this;\n      var dropPosition;\n\n      var removeListeners = function removeListeners() {\n        window.removeEventListener('mouseup', onMouseUp, true);\n        window.removeEventListener('mousemove', onMouseMove, true);\n      };\n\n      var onMouseUp = function onMouseUp(e) {\n        if (!this$1.$$startDragPosition) {\n          e.stopPropagation();\n        }\n\n        if (this$1.draggableNode) {\n          this$1.draggableNode.node.state('dragging', false);\n        }\n\n        if (this$1.$$dropDestination && this$1.tree.isNode(this$1.$$dropDestination) && this$1.$$dropDestination.vm) {\n          updateHelperClasses(this$1.$$dropDestination.vm.$el, null);\n          var cbResult = callDndCb([this$1.draggableNode.node, this$1.$$dropDestination, dropPosition], this$1.tree.options.dnd, 'onDragFinish');\n\n          if (cbResult !== false && !(!this$1.$$dropDestination.isDropable() && dropPosition === DropPosition.ON || !dropPosition)) {\n            this$1.draggableNode.node.finishDragging(this$1.$$dropDestination, dropPosition);\n            this$1.draggableNode.node.parent = this$1.$$dropDestination;\n          }\n\n          this$1.$$dropDestination = null;\n        }\n\n        this$1.$$possibleDragNode = null;\n        this$1.$set(this$1, 'draggableNode', null);\n        removeListeners();\n      };\n\n      var onMouseMove = function onMouseMove(e) {\n        if (this$1.$$startDragPosition && !isMovingStarted(e, this$1.$$startDragPosition)) {\n          return;\n        } else {\n          this$1.$$startDragPosition = null;\n        }\n\n        if (this$1.$$possibleDragNode) {\n          if (this$1.$$possibleDragNode.startDragging() === false) {\n            removeListeners();\n            this$1.$$possibleDragNode = null;\n            return;\n          }\n\n          this$1.$set(this$1, 'draggableNode', {\n            node: this$1.$$possibleDragNode,\n            left: 0,\n            top: 0\n          });\n          this$1.$$possibleDragNode = null;\n        }\n\n        this$1.draggableNode.left = e.clientX;\n        this$1.draggableNode.top = e.clientY;\n        var dropDestination = getDropDestination(e);\n        clearDropClasses(this$1.$el);\n\n        if (dropDestination) {\n          var dropDestinationId = dropDestination.getAttribute('data-id');\n\n          if (this$1.draggableNode.node.id === dropDestinationId) {\n            return;\n          }\n\n          if (!this$1.$$dropDestination || this$1.$$dropDestination.id !== dropDestinationId) {\n            this$1.$$dropDestination = this$1.tree.getNodeById(dropDestinationId);\n          }\n\n          if (this$1.$$dropDestination && this$1.draggableNode.node) {\n            var path = this$1.$$dropDestination.getPath();\n\n            if (path.includes(this$1.draggableNode.node)) {\n              this$1.$$dropDestination = null;\n              return;\n            }\n          }\n\n          dropPosition = getDropPosition(e, dropDestination);\n          var cbResult = callDndCb([this$1.draggableNode.node, this$1.$$dropDestination, dropPosition], this$1.tree.options.dnd, 'onDragOn');\n          var isDropable = this$1.$$dropDestination.isDropable() && cbResult !== false;\n\n          if (!isDropable && dropPosition === DropPosition.ON) {\n            dropPosition = null;\n          }\n\n          updateHelperClasses(dropDestination, dropPosition);\n        }\n      };\n\n      window.addEventListener('mouseup', onMouseUp, true);\n      window.addEventListener('mousemove', onMouseMove, true);\n    }\n  }\n}; //\n\nvar defaults = {\n  direction: 'ltr',\n  multiple: true,\n  checkbox: false,\n  checkOnSelect: false,\n  autoCheckChildren: true,\n  autoDisableChildren: true,\n  checkDisabledChildren: true,\n  parentSelect: false,\n  keyboardNavigation: true,\n  nodeIndent: 24,\n  minFetchDelay: 0,\n  fetchData: null,\n  propertyNames: null,\n  deletion: false,\n  dnd: false,\n  editing: false,\n  onFetchError: function onFetchError(err) {\n    throw err;\n  }\n};\nvar filterDefaults = {\n  emptyText: 'Nothing found!',\n  matcher: function matcher(query, node) {\n    var isMatched = new RegExp(query, 'i').test(node.text);\n\n    if (isMatched) {\n      if (node.parent && new RegExp(query, 'i').test(node.parent.text)) {\n        return false;\n      }\n    }\n\n    return isMatched;\n  },\n  plainList: false,\n  showChildren: true\n};\nvar script$1 = {\n  name: 'Tree',\n  components: {\n    TreeNode: TreeNode$1,\n    DraggableNode: DraggableNode\n  },\n  mixins: [TreeMixin, TreeDnd],\n  provide: function provide(_) {\n    return {\n      tree: null\n    };\n  },\n  props: {\n    data: {},\n    options: {\n      type: Object,\n      \"default\": function _default(_) {\n        return {};\n      }\n    },\n    filter: String,\n    tag: {\n      type: String,\n      \"default\": 'div'\n    }\n  },\n  watch: {\n    filter: function filter(term) {\n      this.tree.filter(term);\n    }\n  },\n  computed: {\n    visibleModel: function visibleModel() {\n      return this.model.filter(function (node) {\n        return node && node.visible();\n      });\n    },\n    visibleMatches: function visibleMatches() {\n      return this.matches.filter(function (node) {\n        return node && node.visible();\n      });\n    }\n  },\n  data: function data() {\n    // we should not mutating a prop directly...\n    // that's why we have to create a new object\n    // TODO: add method for changing options\n    var opts = Object.assign({}, defaults, this.options);\n    opts.filter = Object.assign({}, filterDefaults, opts.filter);\n    return {\n      model: [],\n      tree: null,\n      loading: false,\n      opts: opts,\n      matches: [],\n      draggableNode: null\n    };\n  }\n};\n/* script */\n\nvar __vue_script__$3 = script$1; // For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\n\nscript$1.__file = \"TreeRoot.vue\";\n/* template */\n\nvar __vue_render__$2 = function __vue_render__$2() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return _c(_vm.tag, {\n    tag: \"component\",\n    \"class\": {\n      'tree': true,\n      'tree-loading': this.loading,\n      'tree--draggable': !!this.draggableNode\n    },\n    attrs: {\n      \"role\": \"tree\"\n    }\n  }, [_vm.filter && _vm.matches.length == 0 ? [_c('div', {\n    staticClass: \"tree-filter-empty\",\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.opts.filter.emptyText)\n    }\n  })] : [_c('ul', {\n    staticClass: \"tree-root\",\n    on: {\n      \"dragstart\": _vm.onDragStart\n    }\n  }, [_vm.opts.filter.plainList && _vm.matches.length > 0 ? _vm._l(_vm.visibleMatches, function (node) {\n    return _c('TreeNode', {\n      key: node.id,\n      attrs: {\n        \"node\": node,\n        \"options\": _vm.opts\n      }\n    });\n  }) : _vm._l(_vm.visibleModel, function (node) {\n    return _c('TreeNode', {\n      key: node.id,\n      attrs: {\n        \"node\": node,\n        \"options\": _vm.opts\n      }\n    });\n  })], 2)], _vm._v(\" \"), _vm.draggableNode ? _c('DraggableNode', {\n    attrs: {\n      \"target\": _vm.draggableNode\n    }\n  }) : _vm._e()], 2);\n};\n\nvar __vue_staticRenderFns__$2 = [];\n/* style */\n\nvar __vue_inject_styles__$3 = function __vue_inject_styles__$3(inject) {\n  if (!inject) {\n    return;\n  }\n\n  inject(\"data-v-6db2091d_0\", {\n    source: \".tree{overflow:auto}.tree-children,.tree-root{list-style:none;padding:0}.tree>.tree-filter-empty,.tree>.tree-root{padding:3px;box-sizing:border-box}.tree.tree--draggable .tree-node:not(.selected)>.tree-content:hover{background:0 0}.drag-above,.drag-below,.drag-on{position:relative;z-index:1}.drag-on>.tree-content{background:#fafcff;outline:1px solid #7baff2}.drag-above>.tree-content::before,.drag-below>.tree-content::after{display:block;content:'';position:absolute;height:8px;left:0;right:0;z-index:2;box-sizing:border-box;background-color:#3367d6;border:3px solid #3367d6;background-clip:padding-box;border-bottom-color:transparent;border-top-color:transparent;border-radius:0}.drag-above>.tree-content::before{top:0;transform:translateY(-50%)}.drag-below>.tree-content::after{bottom:0;transform:translateY(50%)}\",\n    map: undefined,\n    media: undefined\n  });\n};\n/* scoped */\n\n\nvar __vue_scope_id__$3 = undefined;\n/* module identifier */\n\nvar __vue_module_identifier__$3 = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__$3 = false;\n/* style inject SSR */\n\nvar TreeRoot = normalizeComponent({\n  render: __vue_render__$2,\n  staticRenderFns: __vue_staticRenderFns__$2\n}, __vue_inject_styles__$3, __vue_script__$3, __vue_scope_id__$3, __vue_is_functional_template__$3, __vue_module_identifier__$3, createInjector, undefined);\n\nvar install = function install(Vue) {\n  Vue.component(TreeRoot.name, TreeRoot);\n};\n\nTreeRoot.install = install;\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(TreeRoot);\n}\n\nexport default TreeRoot;","map":{"version":3,"names":["NodeContent","name","props","render","h","this$1","node","vm","tree","isEditing","nodeText","text","$nextTick","_","$refs","editCtrl","focus","domProps","value","type","on","input","e","target","blur","stopEditing","keyup","keyCode","mouseup","stopPropagation","ref","$scopedSlots","innerHTML","normalizeComponent","compiledTemplate","injectStyle","defaultExport","scopeId","isFunctionalTemplate","moduleIdentifier","isShadowMode","createInjector","createInjectorSSR","createInjectorShadow","options","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","renderWithStyleInjection","existing","beforeCreate","concat","__vue_script__","__file","__vue_inject_styles__","undefined","__vue_scope_id__","__vue_module_identifier__","__vue_is_functional_template__","NodeContent$1","TreeNode","inject","components","watch","data","loading","computed","padding","depth","paddingLeft","nodeIndent","nodeClass","state","states","hasChildren","classes","expanded","selected","disabled","matched","dragging","draggable","checkbox","checked","indeterminate","visibleChildren","children","filter","child","visible","methods","onNodeFocus","activeElement","anchor","select","check","uncheck","evnt","ctrlKey","opts","$emit","editing","editable","startEditing","checkOnSelect","parentSelect","toggleExpand","multiple","unselect","selectedNodes","length","unselectAll","_editingNode","handleMouseDown","event","dnd","startDragging","isOldIE","navigator","test","userAgent","toLowerCase","id","style","addStyle","HEAD","document","head","getElementsByTagName","styles","css","group","media","ids","Set","has","code","source","map","sources","btoa","unescape","encodeURIComponent","JSON","stringify","element","createElement","setAttribute","appendChild","push","styleSheet","cssText","Boolean","join","index","size","textNode","createTextNode","nodes","childNodes","removeChild","insertBefore","__vue_script__$1","__vue_render__","_vm","_h","$createElement","_c","_self","staticClass","attrs","$event","direction","isBatch","_v","_e","_l","key","__vue_staticRenderFns__","__vue_inject_styles__$1","__vue_scope_id__$1","__vue_module_identifier__$1","__vue_is_functional_template__$1","TreeNode$1","script","top","left","__vue_script__$2","__vue_render__$1","_s","__vue_staticRenderFns__$1","__vue_inject_styles__$2","__vue_scope_id__$2","__vue_module_identifier__$2","__vue_is_functional_template__$2","DraggableNode","recurseDown","obj","fn","res","Array","isArray","striptags","__element","innerText","finder","criteria","Object","keys","every","c","val","isRegExp","s","RegExp","getAllChildren","result","forEach","collect","find","deep","s4","Math","floor","random","toString","substring","uuidV4","nodeIterator","method","args","len","arguments","apply","Selection","items","__proto__","prototype","create","constructor","remove","expand","collapse","extendList","disable","enable","Node","item","Error","showChildren","assign","prototypeAccessors","configurable","getPath","path","el","get","set","oldText","setData","recurseUp","recurseDown$1","ignoreThis","refreshIndeterminateState","autoCheckChildren","childrenCount","selectable","checkDisabledChildren","targetNode","show","hide","hidden","enabled","autoDisableChildren","expandTop","ignoreEvent","canExpand","loadChildren","then","collapsed","canCollapse","_toggleOpenedState","toggleCollapse","isDropable","isDraggable","isRoot","model","store","__silence","finishDragging","destination","destinationPosition","clone","append","after","before","$set","newText","prevText","verbose","first","last","next","nextNode","prev","prevNode","insertAt","objectToNode","reverse","n","splice","addChild","prepend","empty","pop","removeNode","find$1","isNode","toJSON","defineProperties","nodeStates","dropable","merge","o","List","includes","indexOf","removeAll","defaultPropertyNames","convertNames","names","TreeParser","parse","p","preparedItems","converter","convertedItem","request","url","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","addEventListener","response","send","createTemplate","template","re","m","exec","replace","orderAsc","node0","node1","orderDesc","getCompareFunction","order","sort","compareFunction","fetchDelay","ms","setTimeout","Tree","fetchData","urlTemplate","onFetchError","$on","$once","$off","_sort","compareFn","sortTree","sort$$1","query","clearFilter","__expanded","matches","predicate","matcher","plainList","Function","bind","checkedNodes","minFetchDelay","fetch","all","parseData","modelParse","fetchInitData","setModel","requestAnimationFrame","treeNode","getNode","selectAll","checkAll","uncheckAll","expandAll","collapseAll","nextVisibleNode","prevVisibleNode","addToModel","sourceNode","position","addNode","updateData","callback","getNodeById","objectToNode$1","propertyNames","keyCodes","codesArr","focusUp","focusdDown","checkNode","leftArrow","rightArrow","deleteNode","deletion","initKeyboardNavigation","$el","ESC","preventDefault","ARROW_LEFT","ARROW_RIGHT","ARROW_TOP","ARROW_BOTTOM","SPACE","ENTER","DELETE","assert","truth","message","initEvents","emitter","newNode","TreeMixin","mounted","dataProvider","_provided","connectStore","keyboardNavigation","Store","mutations","getter","dispatcher","subscribe","action","findAll","getRootNode","DropPosition","ABOVE","BELOW","ON","isMovingStarted","start","abs","clientX","clientY","composedPath","tagName","window","parentElement","getSelectedNode","className","i","getDropDestination","selectedNode","updateHelperClasses","getDropPosition","coords","getBoundingClientRect","nodeSection","height","dropPosition","callDndCb","clearDropClasses","querySelectorAll","TreeDnd","onDragStart","$$startDragPosition","$$possibleDragNode","initDragListeners","removeListeners","removeEventListener","onMouseUp","onMouseMove","draggableNode","$$dropDestination","cbResult","dropDestination","dropDestinationId","getAttribute","defaults","err","filterDefaults","emptyText","isMatched","script$1","mixins","provide","String","tag","term","visibleModel","visibleMatches","__vue_script__$3","__vue_render__$2","__vue_staticRenderFns__$2","__vue_inject_styles__$3","__vue_scope_id__$3","__vue_module_identifier__$3","__vue_is_functional_template__$3","TreeRoot","install","Vue","component","use"],"sources":["/home/orange/Desktop/project-catalog-antd/node_modules/liquor-tree/dist/liquor-tree.esm.js"],"sourcesContent":["\n/*!\n * LiquorTree v0.2.70\n * (c) 2019 amsik\n * Released under the MIT License.\n */\n\nvar NodeContent = {\n  name: 'node-content',\n  props: ['node'],\n  render: function render (h) {\n    var this$1 = this;\n\n    var node = this.node;\n    var vm = this.node.tree.vm;\n\n    if (node.isEditing) {\n      var nodeText = node.text;\n\n      this.$nextTick(function (_) {\n        this$1.$refs.editCtrl.focus();\n      });\n\n      return h('input', {\n        domProps: {\n          value: node.text,\n          type: 'text'\n        },\n        class: 'tree-input',\n        on: {\n          input: function input (e) {\n            nodeText = e.target.value;\n          },\n          blur: function blur () {\n            node.stopEditing(nodeText);\n          },\n          keyup: function keyup (e) {\n            if (e.keyCode === 13) {\n              node.stopEditing(nodeText);\n            }\n          },\n          mouseup: function mouseup (e) {\n            e.stopPropagation();\n          }\n        },\n        ref: 'editCtrl'\n      })\n    }\n\n    if (vm.$scopedSlots.default) {\n      return vm.$scopedSlots.default({ node: this.node })\n    }\n\n    return h('span', {\n      domProps: {\n        innerHTML: node.text\n      }\n    })\n  }\n};\n\nfunction normalizeComponent(compiledTemplate, injectStyle, defaultExport, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, isShadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n    if (typeof isShadowMode === 'function') {\n        createInjectorSSR = createInjector;\n        createInjector = isShadowMode;\n        isShadowMode = false;\n    }\n    // Vue.extend constructor export interop\n    var options = typeof defaultExport === 'function' ? defaultExport.options : defaultExport;\n    // render functions\n    if (compiledTemplate && compiledTemplate.render) {\n        options.render = compiledTemplate.render;\n        options.staticRenderFns = compiledTemplate.staticRenderFns;\n        options._compiled = true;\n        // functional template\n        if (isFunctionalTemplate) {\n            options.functional = true;\n        }\n    }\n    // scopedId\n    if (scopeId) {\n        options._scopeId = scopeId;\n    }\n    var hook;\n    if (moduleIdentifier) {\n        // server build\n        hook = function (context) {\n            // 2.3 injection\n            context =\n                context || // cached call\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\n            // 2.2 with runInNewContext: true\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n                context = __VUE_SSR_CONTEXT__;\n            }\n            // inject component styles\n            if (injectStyle) {\n                injectStyle.call(this, createInjectorSSR(context));\n            }\n            // register component module identifier for async chunk inference\n            if (context && context._registeredComponents) {\n                context._registeredComponents.add(moduleIdentifier);\n            }\n        };\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        options._ssrRegister = hook;\n    }\n    else if (injectStyle) {\n        hook = isShadowMode\n            ? function () {\n                injectStyle.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n            }\n            : function (context) {\n                injectStyle.call(this, createInjector(context));\n            };\n    }\n    if (hook) {\n        if (options.functional) {\n            // register for functional component in vue file\n            var originalRender = options.render;\n            options.render = function renderWithStyleInjection(h, context) {\n                hook.call(context);\n                return originalRender(h, context);\n            };\n        }\n        else {\n            // inject component registration as beforeCreate hook\n            var existing = options.beforeCreate;\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n        }\n    }\n    return defaultExport;\n}\n\n/* script */\nvar __vue_script__ = NodeContent;\n// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\nNodeContent.__file = \"NodeContent.vue\";\n\n/* template */\n\n  /* style */\n  var __vue_inject_styles__ = undefined;\n  /* scoped */\n  var __vue_scope_id__ = undefined;\n  /* module identifier */\n  var __vue_module_identifier__ = undefined;\n  /* functional template */\n  var __vue_is_functional_template__ = undefined;\n  /* style inject */\n  \n  /* style inject SSR */\n  \n\n  \n  var NodeContent$1 = normalizeComponent(\n    {},\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    undefined,\n    undefined\n  );\n\n//\n\nvar TreeNode = {\n  name: 'Node',\n  inject: ['tree'],\n  props: ['node', 'options'],\n\n  components: {\n    NodeContent: NodeContent$1\n  },\n\n  watch: {\n    node: function node() {\n      this.node.vm = this;\n    }\n  },\n\n  data: function data() {\n    this.node.vm = this;\n\n    return {\n      loading: false\n    }\n  },\n\n  computed: {\n    padding: function padding() {\n      return this.node.depth * (this.options.paddingLeft ? this.options.paddingLeft : this.options.nodeIndent) + 'px'\n    },\n\n    nodeClass: function nodeClass() {\n      var state = this.node.states;\n      var hasChildren = this.hasChildren();\n      var classes = {\n        'has-child': hasChildren,\n        'expanded': hasChildren && state.expanded,\n        'selected': state.selected,\n        'disabled': state.disabled,\n        'matched': state.matched,\n        'dragging': state.dragging,\n        'loading': this.loading,\n        'draggable': state.draggable\n      };\n\n      if (this.options.checkbox) {\n        classes['checked'] = state.checked;\n        classes['indeterminate'] = state.indeterminate;\n      }\n\n      return classes\n    },\n\n    visibleChildren: function visibleChildren() {\n      return this.node.children.filter(function(child) {\n        return child && child.visible()\n      })\n    }\n  },\n\n  methods: {\n    onNodeFocus: function onNodeFocus() {\n      this.tree.activeElement = this.node;\n    },\n\n    focus: function focus() {\n      this.$refs.anchor.focus();\n      this.node.select();\n    },\n\n    check: function check() {\n      if (this.node.checked()) {\n        this.node.uncheck();\n      } else {\n        this.node.check();\n      }\n    },\n\n    select: function select(ref) {\n      if ( ref === void 0 ) ref = evnt;\n      var ctrlKey = ref.ctrlKey;\n\n      var opts = this.options;\n      var tree = this.tree;\n      var node = this.node;\n\n      tree.$emit('node:clicked', node);\n\n      if (opts.editing && node.isEditing) {\n        return\n      }\n\n      if (opts.editing && node.editable()) {\n        return this.startEditing()\n      }\n\n      if (opts.checkbox && opts.checkOnSelect) {\n        if (!opts.parentSelect && this.hasChildren()) {\n          return this.toggleExpand()\n        }\n\n        return this.check(ctrlKey)\n      }\n\n      // 'parentSelect' behaviour.\n      // For nodes which has a children list we have to expand/collapse\n      if (!opts.parentSelect && this.hasChildren()) {\n        this.toggleExpand();\n      }\n\n      if (opts.multiple) {\n        if (!node.selected()) {\n          node.select(ctrlKey);\n        } else {\n          if (ctrlKey) {\n            node.unselect();\n          } else {\n            if (this.tree.selectedNodes.length != 1) {\n              tree.unselectAll();\n              node.select();\n            }\n          }\n        }\n      } else {\n        if (node.selected() && ctrlKey) {\n          node.unselect();\n        } else {\n          node.select();\n        }\n      }\n    },\n\n    toggleExpand: function toggleExpand() {\n      if (this.hasChildren()) {\n        this.node.toggleExpand();\n      }\n    },\n\n    hasChildren: function hasChildren() {\n      return this.node.hasChildren()\n    },\n\n    startEditing: function startEditing() {\n      if (this.tree._editingNode) {\n        this.tree._editingNode.stopEditing();\n      }\n\n      this.node.startEditing();\n    },\n\n    stopEditing: function stopEditing() {\n      this.node.stopEditing();\n    },\n\n    handleMouseDown: function handleMouseDown(event) {\n      if (!this.options.dnd) {\n        return\n      }\n\n      this.tree.vm.startDragging(this.node, event);\n    }\n  }\n};\n\nvar isOldIE = typeof navigator !== 'undefined' &&\n    /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n    return function (id, style) { return addStyle(id, style); };\n}\nvar HEAD = document.head || document.getElementsByTagName('head')[0];\nvar styles = {};\nfunction addStyle(id, css) {\n    var group = isOldIE ? css.media || 'default' : id;\n    var style = styles[group] || (styles[group] = { ids: new Set(), styles: [] });\n    if (!style.ids.has(id)) {\n        style.ids.add(id);\n        var code = css.source;\n        if (css.map) {\n            // https://developer.chrome.com/devtools/docs/javascript-debugging\n            // this makes source maps inside style tags work properly in Chrome\n            code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\n            // http://stackoverflow.com/a/26603875\n            code +=\n                '\\n/*# sourceMappingURL=data:application/json;base64,' +\n                    btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n                    ' */';\n        }\n        if (!style.element) {\n            style.element = document.createElement('style');\n            style.element.type = 'text/css';\n            if (css.media)\n                { style.element.setAttribute('media', css.media); }\n            HEAD.appendChild(style.element);\n        }\n        if ('styleSheet' in style.element) {\n            style.styles.push(code);\n            style.element.styleSheet.cssText = style.styles\n                .filter(Boolean)\n                .join('\\n');\n        }\n        else {\n            var index = style.ids.size - 1;\n            var textNode = document.createTextNode(code);\n            var nodes = style.element.childNodes;\n            if (nodes[index])\n                { style.element.removeChild(nodes[index]); }\n            if (nodes.length)\n                { style.element.insertBefore(textNode, nodes[index]); }\n            else\n                { style.element.appendChild(textNode); }\n        }\n    }\n}\n\n/* script */\nvar __vue_script__$1 = TreeNode;\n// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\nTreeNode.__file = \"TreeNode.vue\";\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"tree-node\",class:_vm.nodeClass,attrs:{\"data-id\":_vm.node.id},on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.handleMouseDown($event)}}},[_c('div',{staticClass:\"tree-content\",style:([_vm.options.direction == 'ltr' ? {'padding-left': _vm.padding} : {'padding-right': _vm.padding}]),on:{\"click\":function($event){$event.stopPropagation();return _vm.select($event)}}},[_c('i',{staticClass:\"tree-arrow\",class:[{'expanded': _vm.node.states.expanded, 'has-child': _vm.node.children.length || _vm.node.isBatch}, _vm.options.direction],on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleExpand($event)}}}),_vm._v(\" \"),(_vm.options.checkbox)?_c('i',{staticClass:\"tree-checkbox\",class:{'checked': _vm.node.states.checked, 'indeterminate': _vm.node.states.indeterminate},on:{\"click\":function($event){$event.stopPropagation();return _vm.check($event)}}}):_vm._e(),_vm._v(\" \"),_c('span',{ref:\"anchor\",staticClass:\"tree-anchor\",attrs:{\"tabindex\":\"-1\"},on:{\"focus\":_vm.onNodeFocus,\"dblclick\":function($event){return _vm.tree.$emit('node:dblclick', _vm.node)}}},[_c('node-content',{attrs:{\"node\":_vm.node}})],1)]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"l-fade\"}},[(_vm.hasChildren() && _vm.node.states.expanded)?_c('ul',{staticClass:\"tree-children\"},_vm._l((_vm.visibleChildren),function(child){return _c('node',{key:child.id,attrs:{\"node\":child,\"options\":_vm.options}})}),1):_vm._e()])],1)};\nvar __vue_staticRenderFns__ = [];\n\n  /* style */\n  var __vue_inject_styles__$1 = function (inject) {\n    if (!inject) { return }\n    inject(\"data-v-20094490_0\", { source: \".tree-node{white-space:nowrap;display:flex;flex-direction:column;position:relative;box-sizing:border-box}.tree-content{display:flex;align-items:center;padding:3px;cursor:pointer;width:100%;box-sizing:border-box}.tree-node:not(.selected)>.tree-content:hover{background:#f6f8fb}.tree-node.selected>.tree-content{background-color:#e7eef7}.tree-node.disabled>.tree-content:hover{background:inherit}.tree-arrow{flex-shrink:0;height:30px;cursor:pointer;margin-left:30px;width:0}.tree-arrow.has-child{margin-left:0;width:30px;position:relative}.tree-arrow.has-child:after{border:1.5px solid #494646;position:absolute;border-left:0;border-top:0;left:9px;top:50%;height:9px;width:9px;transform:rotate(-45deg) translateY(-50%) translateX(0);transition:transform .25s;transform-origin:center}.tree-arrow.has-child.rtl:after{border:1.5px solid #494646;position:absolute;border-right:0;border-bottom:0;right:0;top:50%;height:9px;width:9px;transform:rotate(-45deg) translateY(-50%) translateX(0);transition:transform .25s;transform-origin:center}.tree-arrow.expanded.has-child:after{transform:rotate(45deg) translateY(-50%) translateX(-5px)}.tree-checkbox{flex-shrink:0;position:relative;width:30px;height:30px;box-sizing:border-box;border:1px solid #dadada;border-radius:2px;background:#fff;transition:border-color .25s,background-color .25s}.tree-arrow:after,.tree-checkbox:after{position:absolute;display:block;content:\\\"\\\"}.tree-checkbox.checked,.tree-checkbox.indeterminate{background-color:#3a99fc;border-color:#218eff}.tree-checkbox.checked:after{box-sizing:content-box;border:1.5px solid #fff;border-left:0;border-top:0;left:9px;top:3px;height:15px;width:8px;transform:rotate(45deg) scaleY(0);transition:transform .25s;transform-origin:center}.tree-checkbox.checked:after{transform:rotate(45deg) scaleY(1)}.tree-checkbox.indeterminate:after{background-color:#fff;top:50%;left:20%;right:20%;height:2px}.tree-anchor{flex-grow:2;outline:0;display:flex;text-decoration:none;color:#343434;vertical-align:top;margin-left:3px;line-height:24px;padding:3px 6px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-node.selected>.tree-content>.tree-anchor{outline:0}.tree-node.disabled>.tree-content>.tree-anchor{color:#989191;background:#fff;opacity:.6;cursor:default;outline:0}.tree-input{display:block;width:100%;height:24px;line-height:24px;outline:0;border:1px solid #3498db;padding:0 4px}.l-fade-enter-active,.l-fade-leave-active{transition:opacity .3s,transform .3s;transform:translateX(0)}.l-fade-enter,.l-fade-leave-to{opacity:0;transform:translateX(-2em)}.tree--small .tree-anchor{line-height:19px}.tree--small .tree-checkbox{width:23px;height:23px}.tree--small .tree-arrow{height:23px}.tree--small .tree-checkbox.checked:after{left:7px;top:3px;height:11px;width:5px}.tree-node.has-child.loading>.tree-content>.tree-arrow,.tree-node.has-child.loading>.tree-content>.tree-arrow:after{border-radius:50%;width:15px;height:15px;border:0}.tree-node.has-child.loading>.tree-content>.tree-arrow{font-size:3px;position:relative;border-top:1.1em solid rgba(45,45,45,.2);border-right:1.1em solid rgba(45,45,45,.2);border-bottom:1.1em solid rgba(45,45,45,.2);border-left:1.1em solid #2d2d2d;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);left:5px;-webkit-animation:loading 1.1s infinite linear;animation:loading 1.1s infinite linear;margin-right:8px}@-webkit-keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}\", map: undefined, media: undefined });\n\n  };\n  /* scoped */\n  var __vue_scope_id__$1 = undefined;\n  /* module identifier */\n  var __vue_module_identifier__$1 = undefined;\n  /* functional template */\n  var __vue_is_functional_template__$1 = false;\n  /* style inject SSR */\n  \n\n  \n  var TreeNode$1 = normalizeComponent(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__$1,\n    __vue_script__$1,\n    __vue_scope_id__$1,\n    __vue_is_functional_template__$1,\n    __vue_module_identifier__$1,\n    createInjector,\n    undefined\n  );\n\n//\n//\n//\n//\n//\n//\n\nvar script = {\n  name: 'DragNode',\n  props: ['target'],\n  computed: {\n    style: function style() {\n      if (undefined === this.target.top) {\n        return 'display: none'\n      }\n\n      return (\"top: \" + (this.target.top) + \"px; left: \" + (this.target.left) + \"px\")\n    }\n  }\n};\n\n/* script */\nvar __vue_script__$2 = script;\n// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\nscript.__file = \"DraggableNode.vue\";\n\n/* template */\nvar __vue_render__$1 = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree-dragnode\",style:(_vm.style)},[_vm._v(\"\\n  \"+_vm._s(_vm.target.node.text)+\"\\n\")])};\nvar __vue_staticRenderFns__$1 = [];\n\n  /* style */\n  var __vue_inject_styles__$2 = function (inject) {\n    if (!inject) { return }\n    inject(\"data-v-7a41ac3e_0\", { source: \".tree-dragnode{padding:10px;border:1px solid #e7eef7;position:fixed;border-radius:8px;background:#fff;transform:translate(-50%,-110%);z-index:10}\", map: undefined, media: undefined });\n\n  };\n  /* scoped */\n  var __vue_scope_id__$2 = undefined;\n  /* module identifier */\n  var __vue_module_identifier__$2 = undefined;\n  /* functional template */\n  var __vue_is_functional_template__$2 = false;\n  /* style inject SSR */\n  \n\n  \n  var DraggableNode = normalizeComponent(\n    { render: __vue_render__$1, staticRenderFns: __vue_staticRenderFns__$1 },\n    __vue_inject_styles__$2,\n    __vue_script__$2,\n    __vue_scope_id__$2,\n    __vue_is_functional_template__$2,\n    __vue_module_identifier__$2,\n    createInjector,\n    undefined\n  );\n\nfunction recurseDown (obj, fn) {\r\n  var res;\r\n\r\n  if (Array.isArray(obj)) {\r\n    return obj.map(function (node) { return recurseDown(node, fn); })\r\n  }\r\n\r\n  res = fn(obj);\r\n\r\n  // Recurse children\r\n  if (res !== false && obj.children && obj.children.length) {\r\n    res = recurseDown(obj.children, fn);\r\n  }\r\n\r\n  return res\r\n}\n\nfunction striptags (value) {\r\n  // ssr fix\r\n  if (!!document === false) {\r\n    return value\r\n  }\r\n\r\n  if (!striptags.__element) {\r\n    striptags.__element = document.createElement('div');\r\n  }\r\n\r\n  striptags.__element.innerHTML = value;\r\n  return striptags.__element.innerText\r\n}\r\n\r\nfunction finder (criteria) {\r\n  return function (node) {\r\n    return Object.keys(criteria).every(function (key) {\r\n      if (key === 'text' || key === 'id') {\r\n        var c = criteria[key];\r\n        var val = node[key];\r\n\r\n        // remove html tags\r\n        val = striptags(val);\r\n\r\n        if (isRegExp(c)) {\r\n          return c.test(val)\r\n        } else {\r\n          return c === val\r\n        }\r\n      }\r\n\r\n      var states = criteria[key];\r\n\r\n      // it is possible to pass 'states' or 'state'\r\n      if (key === 'state') {\r\n        key = 'states';\r\n      }\r\n\r\n      return Object.keys(states).every(function (s) { return node[key][s] === states[s]; })\r\n    })\r\n  }\r\n}\r\n\r\nfunction isRegExp (val) {\r\n  return val instanceof RegExp\r\n}\r\n\r\nfunction getAllChildren (source) {\r\n  var result = [];\r\n\r\n  source.forEach(function collect (node) {\r\n    result.push(node);\r\n\r\n    if (node.children) {\r\n      node.children.forEach(collect);\r\n    }\r\n  });\r\n\r\n  return result\r\n}\r\n\r\nfunction find (source, criteria, deep) {\n  if ( deep === void 0 ) deep = true;\n\r\n  if (!source || !source.length || !criteria) {\r\n    return null\r\n  }\r\n\r\n  if (deep) {\r\n    source = getAllChildren(source);\r\n  }\r\n\r\n  // find by index\r\n  if (typeof criteria === 'number') {\r\n    return source[criteria] || null\r\n  }\r\n\r\n  if (typeof criteria === 'string' || criteria instanceof RegExp) {\r\n    criteria = {\r\n      text: criteria\r\n    };\r\n  }\r\n\r\n  if (typeof criteria !== 'function') {\r\n    criteria = finder(criteria);\r\n  }\r\n\r\n  var result = source.filter(criteria);\r\n\r\n  if (result.length) {\r\n    return result\r\n  }\r\n\r\n  return null\r\n}\n\n// it is not genuine GUIDs\r\n\r\nfunction s4 () {\r\n  return Math.floor((1 + Math.random()) * 0x10000)\r\n    .toString(16)\r\n    .substring(1)\r\n}\r\n\r\nfunction uuidV4 () {\r\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n    s4() + '-' + s4() + s4() + s4()\r\n}\n\nfunction nodeIterator (context, method) {\n  var args = [], len = arguments.length - 2;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 2 ];\n\r\n  context.forEach(function (node) { return node[method].apply(node, args); });\r\n}\r\n\r\nvar Selection = /*@__PURE__*/(function (Array) {\n  function Selection (tree, items) {\n    var ref;\n\n    if ( items === void 0 ) items = [];\r\n    /*eslint semi: 0 */\r\n    Array.call(this);\r\n\r\n    this.tree = tree;\r\n    (ref = this).push.apply(ref, items);\r\n  }\n\n  if ( Array ) Selection.__proto__ = Array;\n  Selection.prototype = Object.create( Array && Array.prototype );\n  Selection.prototype.constructor = Selection;\r\n\r\n  Selection.prototype.remove = function remove () {\r\n    nodeIterator(this, 'remove');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.expand = function expand () {\r\n    nodeIterator(this, 'expand');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.collapse = function collapse () {\r\n    nodeIterator(this, 'collapse');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.select = function select (extendList) {\r\n    nodeIterator(this, 'select', extendList);\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.unselect = function unselect () {\r\n    nodeIterator(this, 'unselect');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.check = function check () {\r\n    if (this.tree.options.checkbox) {\r\n      nodeIterator(this, 'check');\r\n    }\r\n\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.uncheck = function uncheck () {\r\n    if (this.tree.options.checkbox) {\r\n      nodeIterator(this, 'uncheck');\r\n    }\r\n\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.disable = function disable () {\r\n    nodeIterator(this, 'disable');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.enable = function enable () {\r\n    nodeIterator(this, 'enable');\r\n    return this\r\n  };\n\n  return Selection;\n}(Array));\n\nvar Node = function Node (tree, item) {\r\n  if (!item) {\r\n    throw new Error('Node can not be empty')\r\n  }\r\n\r\n  this.id = item.id || uuidV4();\r\n  this.states = item.state || {};\r\n\r\n  this.showChildren = true;\r\n  this.children = item.children || [];\r\n  this.parent = item.parent || null;\r\n\r\n  this.isBatch = item.isBatch || false;\r\n  this.isEditing = false;\r\n\r\n  this.data = Object.assign({}, item.data || {}, {\r\n    text: item.text\r\n  });\r\n\r\n  if (!tree) {\r\n    throw new Error('Node must have a Tree context!')\r\n  }\r\n\r\n  this.tree = tree;\r\n};\n\nvar prototypeAccessors = { key: { configurable: true },depth: { configurable: true },text: { configurable: true } };\r\n\r\nNode.prototype.$emit = function $emit (evnt) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  (ref = this.tree).$emit.apply(ref, [ (\"node:\" + evnt), this ].concat( args ));\r\n};\r\n\r\nNode.prototype.getPath = function getPath () {\r\n  if (!this.parent) {\r\n    return [this]\r\n  }\r\n\r\n  var path = [this];\r\n  var el = this;\r\n\r\n  while ((el = el.parent) !== null) {\r\n    path.push(el);\r\n  }\r\n\r\n  return path\r\n};\r\n\r\nprototypeAccessors.key.get = function () {\r\n  return this.id + this.text\r\n};\r\n\r\nprototypeAccessors.depth.get = function () {\r\n  var depth = 0;\r\n  var parent = this.parent;\r\n\r\n  if (!parent || this.showChildren === false) {\r\n    return depth\r\n  }\r\n\r\n  do {\r\n    depth++;\r\n  } while (parent = parent.parent)\r\n\r\n  return depth\r\n};\r\n\r\nprototypeAccessors.text.get = function () {\r\n  return this.data.text\r\n};\r\n\r\nprototypeAccessors.text.set = function (text) {\r\n  var oldText = this.text;\r\n\r\n  if (oldText !== text) {\r\n    this.data.text = text;\r\n    this.$emit('text:changed', text, oldText);\r\n  }\r\n};\r\n\r\nNode.prototype.setData = function setData (data) {\r\n  this.data = Object.assign({}, this.data, data);\r\n\r\n  this.$emit('data:changed', this.data);\r\n\r\n  return this.data\r\n};\r\n\r\nNode.prototype.state = function state (name, value) {\r\n  if (undefined === value) {\r\n    return this.states[name]\r\n  }\r\n\r\n  // TODO: check if it for example `selectable` state it should unselect node\r\n\r\n  this.states[name] = value;\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.recurseUp = function recurseUp (fn, node) {\n    if ( node === void 0 ) node = this;\n\r\n  if (!node.parent) {\r\n    return\r\n  }\r\n\r\n  if (fn(node.parent) !== false) {\r\n    return this.recurseUp(fn, node.parent)\r\n  }\r\n};\r\n\r\nNode.prototype.recurseDown = function recurseDown$1 (fn, ignoreThis) {\r\n  if (ignoreThis !== true) {\r\n    fn(this);\r\n  }\r\n\r\n  if (this.hasChildren()) {\r\n    recurseDown(this.children, fn);\r\n  }\r\n};\r\n\r\nNode.prototype.refreshIndeterminateState = function refreshIndeterminateState () {\r\n  if (!this.tree.options.autoCheckChildren) {\r\n    return this\r\n  }\r\n\r\n  this.state('indeterminate', false);\r\n\r\n  if (this.hasChildren()) {\r\n    var childrenCount = this.children.length;\r\n    var checked = 0;\r\n    var indeterminate = 0;\r\n    var disabled = 0;\r\n\r\n    this.children.forEach(function (child) {\r\n      if (child.checked()) {\r\n        checked++;\r\n      }\r\n\r\n      if (child.disabled()) {\r\n        disabled++;\r\n      }\r\n\r\n      if (child.indeterminate()) {\r\n        indeterminate++;\r\n      }\r\n    });\r\n\r\n    if (checked > 0 && checked === childrenCount - disabled) {\r\n      if (!this.checked()) {\r\n        this.state('checked', true);\r\n        this.tree.check(this);\r\n\r\n        this.$emit('checked');\r\n      }\r\n    } else {\r\n      if (this.checked()) {\r\n        this.state('checked', false);\r\n        this.tree.uncheck(this);\r\n\r\n        this.$emit('unchecked');\r\n      }\r\n\r\n      this.state(\r\n        'indeterminate',\r\n        indeterminate > 0 || (checked > 0 && checked < childrenCount)\r\n      );\r\n    }\r\n  }\r\n\r\n  if (this.parent) {\r\n    this.parent.refreshIndeterminateState();\r\n  }\r\n};\r\n\r\nNode.prototype.indeterminate = function indeterminate () {\r\n  return this.state('indeterminate')\r\n};\r\n\r\nNode.prototype.editable = function editable () {\r\n  return !this.state('disabled') && this.state('editable')\r\n};\r\n\r\nNode.prototype.selectable = function selectable () {\r\n  return !this.state('disabled') && this.state('selectable')\r\n};\r\n\r\nNode.prototype.selected = function selected () {\r\n  return this.state('selected')\r\n};\r\n\r\nNode.prototype.select = function select (extendList) {\r\n  if (!this.selectable() || this.selected()) {\r\n    return this\r\n  }\r\n\r\n  this.tree.select(this, extendList);\r\n\r\n  this.state('selected', true);\r\n  this.$emit('selected');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.unselect = function unselect () {\r\n  if (!this.selectable() || !this.selected()) {\r\n    return this\r\n  }\r\n\r\n  this.tree.unselect(this);\r\n\r\n  this.state('selected', false);\r\n  this.$emit('unselected');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.checked = function checked () {\r\n  return this.state('checked')\r\n};\r\n\r\nNode.prototype.check = function check () {\n    var this$1 = this;\n\r\n  if (this.checked() || this.disabled()) {\r\n    return this\r\n  }\r\n\r\n  if (this.indeterminate()) {\r\n    return this.uncheck()\r\n  }\r\n\r\n  var checkDisabledChildren = this.tree.options.checkDisabledChildren;\r\n  var targetNode = this;\r\n\r\n  if (this.tree.options.autoCheckChildren) {\r\n    this.recurseDown(function (node) {\r\n      node.state('indeterminate', false);\r\n\r\n      if (node.disabled() && !checkDisabledChildren) {\r\n        return\r\n      }\r\n\r\n      if (!node.checked()) {\r\n        this$1.tree.check(node);\r\n\r\n        node.state('checked', true);\r\n        node.$emit('checked', node.id === targetNode.id ? undefined : targetNode);\r\n      }\r\n    });\r\n\r\n    if (this.parent) {\r\n      this.parent.refreshIndeterminateState();\r\n    }\r\n  } else {\r\n    this.tree.check(this);\r\n\r\n    this.state('checked', true);\r\n    this.$emit('checked');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.uncheck = function uncheck () {\n    var this$1 = this;\n\r\n  if (!this.indeterminate() && !this.checked() || this.disabled()) {\r\n    return this\r\n  }\r\n\r\n  var targetNode = this;\r\n\r\n  if (this.tree.options.autoCheckChildren) {\r\n    this.recurseDown(function (node) {\r\n      node.state('indeterminate', false);\r\n\r\n      if (node.checked()) {\r\n        this$1.tree.uncheck(node);\r\n\r\n        node.state('checked', false);\r\n        node.$emit('unchecked', node.id === targetNode.id ? undefined : targetNode);\r\n      }\r\n    });\r\n\r\n    if (this.parent) {\r\n      this.parent.refreshIndeterminateState();\r\n    }\r\n  } else {\r\n    this.tree.uncheck(this);\r\n\r\n    this.state('checked', false);\r\n    this.$emit('unchecked');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.show = function show () {\r\n  if (this.visible()) {\r\n    return this\r\n  }\r\n\r\n  this.state('visible', true);\r\n  this.$emit('shown');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.hide = function hide () {\r\n  if (this.hidden()) {\r\n    return this\r\n  }\r\n\r\n  this.state('visible', false);\r\n  this.$emit('hidden');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.visible = function visible () {\r\n  return this.state('visible')\r\n};\r\n\r\nNode.prototype.hidden = function hidden () {\r\n  return !this.state('visible')\r\n};\r\n\r\nNode.prototype.enable = function enable () {\r\n  if (this.enabled()) {\r\n    return this\r\n  }\r\n\r\n  if (this.tree.options.autoDisableChildren) {\r\n    this.recurseDown(function (node) {\r\n      if (node.disabled()) {\r\n        node.state('disabled', false);\r\n        node.$emit('enabled');\r\n      }\r\n    });\r\n  } else {\r\n    this.state('disabled', false);\r\n    this.$emit('enabled');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.enabled = function enabled () {\r\n  return !this.state('disabled')\r\n};\r\n\r\nNode.prototype.disable = function disable () {\r\n  if (this.disabled()) {\r\n    return this\r\n  }\r\n\r\n  if (this.tree.options.autoDisableChildren) {\r\n    this.recurseDown(function (node) {\r\n      if (node.enabled()) {\r\n        node.state('disabled', true);\r\n        node.$emit('disabled');\r\n      }\r\n    });\r\n  } else {\r\n    this.state('disabled', true);\r\n    this.$emit('disabled');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.disabled = function disabled () {\r\n  return this.state('disabled')\r\n};\r\n\r\nNode.prototype.expandTop = function expandTop (ignoreEvent) {\n    var this$1 = this;\n\r\n  this.recurseUp(function (parent) {\r\n    parent.state('expanded', true);\r\n\r\n    if (ignoreEvent !== true) {\r\n      this$1.$emit('expanded', parent);\r\n    }\r\n  });\r\n};\r\n\r\nNode.prototype.expand = function expand () {\n    var this$1 = this;\n\r\n  if (!this.canExpand()) {\r\n    return this\r\n  }\r\n\r\n  if (this.isBatch) {\r\n    this.tree.loadChildren(this).then(function (_) {\r\n      this$1.state('expanded', true);\r\n      this$1.$emit('expanded');\r\n    });\r\n  } else {\r\n    this.state('expanded', true);\r\n    this.$emit('expanded');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.canExpand = function canExpand () {\r\n  if (this.disabled() || !this.hasChildren()) {\r\n    return false\r\n  }\r\n\r\n  return this.collapsed() &&\r\n    (!this.tree.autoDisableChildren || this.disabled())\r\n};\r\n\r\nNode.prototype.canCollapse = function canCollapse () {\r\n  if (this.disabled() || !this.hasChildren()) {\r\n    return false\r\n  }\r\n\r\n  return this.expanded() &&\r\n    (!this.tree.autoDisableChildren || this.disabled())\r\n};\r\n\r\nNode.prototype.expanded = function expanded () {\r\n  return this.state('expanded')\r\n};\r\n\r\nNode.prototype.collapse = function collapse () {\r\n  if (!this.canCollapse()) {\r\n    return this\r\n  }\r\n\r\n  this.state('expanded', false);\r\n  this.$emit('collapsed');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.collapsed = function collapsed () {\r\n  return !this.state('expanded')\r\n};\r\n\r\nNode.prototype.toggleExpand = function toggleExpand () {\r\n  return this._toggleOpenedState()\r\n};\r\n\r\nNode.prototype.toggleCollapse = function toggleCollapse () {\r\n  return this._toggleOpenedState()\r\n};\r\n\r\nNode.prototype._toggleOpenedState = function _toggleOpenedState () {\r\n  if (this.canCollapse()) {\r\n    return this.collapse()\r\n  } else if (this.canExpand()) {\r\n    return this.expand()\r\n  }\r\n};\r\n\r\nNode.prototype.isDropable = function isDropable () {\r\n  return this.enabled() && this.state('dropable')\r\n};\r\n\r\nNode.prototype.isDraggable = function isDraggable () {\r\n  return this.enabled() && this.state('draggable') && !this.isEditing\r\n};\r\n\r\nNode.prototype.startDragging = function startDragging () {\r\n  if (!this.isDraggable() || this.state('dragging')) {\r\n    return false\r\n  }\r\n\r\n  // root element\r\n  if (this.isRoot() && this.tree.model.length === 1) {\r\n    return false\r\n  }\r\n\r\n  if (this.tree.options.store) {\r\n    this.tree.__silence = true;\r\n  }\r\n\r\n  this.select();\r\n  this.state('dragging', true);\r\n  this.$emit('dragging:start');\r\n\r\n  this.tree.__silence = false;\r\n\r\n  return true\r\n};\r\n\r\nNode.prototype.finishDragging = function finishDragging (destination, destinationPosition) {\r\n  if (!destination.isDropable() && destinationPosition === 'drag-on') {\r\n    return\r\n  }\r\n\r\n  var tree = this.tree;\r\n  var clone = this.clone();\r\n  var parent = this.parent;\r\n\r\n  clone.id = this.id;\r\n  tree.__silence = true;\r\n\r\n  this.remove();\r\n\r\n  if (destinationPosition === 'drag-on') {\r\n    tree.append(destination, clone);\r\n  } else if (destinationPosition === 'drag-below') {\r\n    tree.after(destination, clone);\r\n  } else if (destinationPosition === 'drag-above') {\r\n    tree.before(destination, clone);\r\n  }\r\n\r\n  destination.refreshIndeterminateState();\r\n\r\n  parent && parent.refreshIndeterminateState();\r\n  tree.__silence = false;\r\n\r\n  clone.state('dragging', false);\r\n  this.state('dragging', false);\r\n  // need to call emit on the clone, because we need to have node.parent filled in the event listener\r\n  clone.$emit('dragging:finish', destination, destinationPosition);\r\n\r\n  if (clone.state('selected')) {\r\n    tree.selectedNodes.remove(this);\r\n    tree.selectedNodes.add(clone);\r\n\r\n    tree.vm.$set(this.state, 'selected', false);\r\n    tree.vm.$set(clone.state, 'selected', true);\r\n  }\r\n\r\n  if (this.tree.options.store) {\r\n    this.tree.vm.$emit('LIQUOR_NOISE');\r\n  }\r\n};\r\n\r\nNode.prototype.startEditing = function startEditing () {\r\n  if (this.disabled()) {\r\n    return false\r\n  }\r\n\r\n  if (!this.isEditing) {\r\n    this.tree._editingNode = this;\r\n    this.tree.activeElement = this;\r\n    this.isEditing = true;\r\n    this.$emit('editing:start');\r\n  }\r\n};\r\n\r\nNode.prototype.stopEditing = function stopEditing (newText) {\r\n  if (!this.isEditing) {\r\n    return\r\n  }\r\n\r\n  this.isEditing = false;\r\n  this.tree._editingNode = null;\r\n  this.tree.activeElement = null;\r\n\r\n  var prevText = this.text;\r\n\r\n  if (newText && newText !== false && this.text !== newText) {\r\n    this.text = newText;\r\n  }\r\n\r\n  this.$emit('editing:stop', prevText);\r\n};\r\n\r\nNode.prototype.index = function index (verbose) {\r\n  return this.tree.index(this, verbose)\r\n};\r\n\r\nNode.prototype.first = function first () {\r\n  if (!this.hasChildren()) {\r\n    return null\r\n  }\r\n\r\n  return this.children[0]\r\n};\r\n\r\nNode.prototype.last = function last () {\r\n  if (!this.hasChildren()) {\r\n    return null\r\n  }\r\n\r\n  return this.children[this.children.length - 1]\r\n};\r\n\r\nNode.prototype.next = function next () {\r\n  return this.tree.nextNode(this)\r\n};\r\n\r\nNode.prototype.prev = function prev () {\r\n  return this.tree.prevNode(this)\r\n};\r\n\r\nNode.prototype.insertAt = function insertAt (node, index) {\n    var this$1 = this;\n    if ( index === void 0 ) index = this.children.length;\n\r\n  if (!node) {\r\n    return\r\n  }\r\n\r\n  node = this.tree.objectToNode(node);\r\n\r\n  if (Array.isArray(node)) {\r\n    node\r\n      .reverse()\r\n      .map(function (n) { return this$1.insertAt(n, index); });\r\n\r\n    return new Selection(this.tree, [].concat( node ))\r\n  }\r\n\r\n  node.parent = this;\r\n\r\n  this.children.splice(\r\n    index, 0, node\r\n  );\r\n\r\n  if (node.disabled() && node.hasChildren()) {\r\n    node.recurseDown(function (child) {\r\n      child.state('disabled', true);\r\n    });\r\n  }\r\n\r\n  if (!this.isBatch) {\r\n    this.$emit('added', node);\r\n  }\r\n\r\n  return node\r\n};\r\n\r\nNode.prototype.addChild = function addChild (node) {\r\n  return this.insertAt(node)\r\n};\r\n\r\nNode.prototype.append = function append (node) {\r\n  return this.addChild(node)\r\n};\r\n\r\nNode.prototype.prepend = function prepend (node) {\r\n  return this.insertAt(node, 0)\r\n};\r\n\r\nNode.prototype.before = function before (node) {\r\n  return this.tree.before(this, node)\r\n};\r\n\r\nNode.prototype.after = function after (node) {\r\n  return this.tree.after(this, node)\r\n};\r\n\r\nNode.prototype.empty = function empty () {\r\n  var node;\r\n\r\n  while (node = this.children.pop()) {\r\n    node.remove();\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.remove = function remove () {\r\n  return this.tree.removeNode(this)\r\n};\r\n\r\nNode.prototype.removeChild = function removeChild (criteria) {\r\n  var node = this.find(criteria);\r\n\r\n  if (node) {\r\n    return this.tree.removeNode(node)\r\n  }\r\n\r\n  return null\r\n};\r\n\r\nNode.prototype.find = function find$1 (criteria, deep) {\r\n  if (this.tree.isNode(criteria)) {\r\n    return criteria\r\n  }\r\n\r\n  return find(this.children, criteria, deep)\r\n};\r\n\r\nNode.prototype.focus = function focus () {\r\n  if (this.vm) {\r\n    this.vm.focus();\r\n  }\r\n};\r\n\r\nNode.prototype.hasChildren = function hasChildren () {\r\n  return this.showChildren && this.isBatch || this.children.length > 0\r\n};\r\n\r\n/**\r\n* Sometimes it's no need to have a parent. It possible to have more than 1 parent\r\n*/\r\nNode.prototype.isRoot = function isRoot () {\r\n  return this.parent === null\r\n};\r\n\r\nNode.prototype.clone = function clone () {\r\n  return this.tree.objectToNode(this.toJSON())\r\n};\r\n\r\nNode.prototype.toJSON = function toJSON () {\n    var this$1 = this;\n\r\n  return {\r\n    text: this.text,\r\n    data: this.data,\r\n    state: this.states,\r\n    children: this.children.map(function (node) { return this$1.tree.objectToNode(node).toJSON(); })\r\n  }\r\n};\n\nObject.defineProperties( Node.prototype, prototypeAccessors );\n\n/**\r\n* Default Node's states\r\n*/\r\nvar nodeStates = {\r\n  selected: false,\r\n  selectable: true,\r\n  checked: false,\r\n  expanded: false,\r\n  disabled: false,\r\n  visible: true,\r\n  indeterminate: false,\r\n  matched: false,\r\n  editable: true,\r\n  dragging: false,\r\n  draggable: true,\r\n  dropable: true\r\n};\r\n\r\nfunction merge (state) {\n  if ( state === void 0 ) state = {};\n\r\n  return Object.assign({}, nodeStates, state)\r\n}\r\n\r\nfunction objectToNode (tree, obj) {\r\n  var node = null;\r\n\r\n  if (obj instanceof Node) {\r\n    return obj\r\n  }\r\n\r\n  if (typeof obj === 'string') {\r\n    node = new Node(tree, {\r\n      text: obj,\r\n      state: merge(),\r\n      id: uuidV4()\r\n    });\r\n  } else if (Array.isArray(obj)) {\r\n    return obj.map(function (o) { return objectToNode(tree, o); })\r\n  } else {\r\n    node = new Node(tree, obj);\r\n    node.states = merge(node.states);\r\n\r\n    if (!node.id) {\r\n      node.id = uuidV4();\r\n    }\r\n\r\n    if (node.children.length) {\r\n      node.children = node.children.map(function (child) {\r\n        child = objectToNode(tree, child);\r\n        child.parent = node;\r\n\r\n        return child\r\n      });\r\n    }\r\n  }\r\n\r\n  return node\r\n}\n\nvar List = /*@__PURE__*/(function (Array) {\n  function List () {\n    Array.apply(this, arguments);\n  }\n\n  if ( Array ) List.__proto__ = Array;\n  List.prototype = Object.create( Array && Array.prototype );\n  List.prototype.constructor = List;\n\n  List.prototype.empty = function empty () {\r\n    this.splice(0, this.length);\r\n\r\n    return this\r\n  };\r\n\r\n  List.prototype.has = function has (item) {\r\n    return this.includes(item)\r\n  };\r\n\r\n  List.prototype.add = function add () {\n    var ref;\n\n    var items = [], len = arguments.length;\n    while ( len-- ) items[ len ] = arguments[ len ];\r\n    (ref = this).push.apply(ref, items);\r\n\r\n    return this\r\n  };\r\n\r\n  List.prototype.remove = function remove (item) {\r\n    var index = this.indexOf(item);\r\n\r\n    if (index === -1) {\r\n      return this\r\n    }\r\n\r\n    this.splice(index, 1);\r\n\r\n    return this\r\n  };\r\n\r\n  List.prototype.removeAll = function removeAll (item) {\r\n    while (this.includes(item)) {\r\n      this.remove(item);\r\n    }\r\n\r\n    return this\r\n  };\r\n\r\n  List.prototype.top = function top () {\r\n    return this[this.length - 1]\r\n  };\n\n  return List;\n}(Array));\n\n/**\r\n  Every Node has certain format:\r\n  {\r\n    id,           // Unique Node id. By default it generates using uuidV4\r\n    text,         // Node text\r\n    children,     // List of children. Each children has the same format\r\n    parent,       // Parent Node or null. The tree is able to have more than 1 root node\r\n    state,        // States of Node. Ex.: selected, checked and so on\r\n    data          // Any types of data. It is similar to `storage`.\r\n                  // Ex.: data: {myAwesomeProperty: 10}. To get this property you need: Node.data('myAwesomeProperty')\r\n  }\r\n*/\r\n\r\nvar defaultPropertyNames = {\r\n  id: 'id',\r\n  text: 'text',\r\n  children: 'children',\r\n  state: 'state',\r\n  data: 'data',\r\n  isBatch: 'isBatch'\r\n};\r\n\r\nfunction convertNames (obj, names) {\r\n  return {\r\n    id: obj[names.id],\r\n    text: obj[names.text],\r\n    children: obj[names.children],\r\n    state: obj[names.state],\r\n    data: obj[names.data],\r\n    isBatch: obj[names.isBatch]\r\n  }\r\n}\r\n\r\nvar TreeParser = {\r\n  parse: function parse (data, tree, options) {\n    if ( options === void 0 ) options = {};\n\r\n    if (typeof data === 'string') {\r\n      data = JSON.parse(data);\r\n    }\r\n\r\n    if (!Array.isArray(data)) {\r\n      data = [data];\r\n    }\r\n\r\n    var p = Object.assign(\r\n      {},\r\n      defaultPropertyNames,\r\n      options\r\n    );\r\n\r\n    var preparedItems = data.map(function converter (item) {\r\n      var convertedItem = convertNames(item, p);\r\n\r\n      // Possible to receive 1 child like a simple object. It must be converted to an array\r\n      // We do not have checks on the correctness of the format. A developer should pass correct format\r\n      if (convertedItem.children && !Array.isArray(convertedItem.children)) {\r\n        convertedItem.children = [convertedItem.children];\r\n      }\r\n\r\n      if (convertedItem.children) {\r\n        convertedItem.children = convertedItem.children.map(converter);\r\n      }\r\n\r\n      return convertedItem\r\n    });\r\n\r\n    return preparedItems.map(function (item) { return objectToNode(tree, item); })\r\n  }\r\n};\n\n/*eslint no-undef: 0 */\r\n\r\nfunction request (url) {\r\n  return new Promise(function (resolve, reject) {\r\n    var xhr = new XMLHttpRequest();\r\n\r\n    xhr.open('GET', url);\r\n    xhr.setRequestHeader('Content-Type', 'application/json');\r\n    xhr.addEventListener('load', function (_) {\r\n      try {\r\n        var response = JSON.parse(xhr.response);\r\n\r\n        resolve(response);\r\n      } catch (e) {\r\n        reject(e);\r\n      }    });\r\n\r\n    xhr.send(null);\r\n  })\r\n}\r\n\r\nfunction get (url) {\r\n  return request(url)\r\n}\r\n\r\nfunction createTemplate (template) {\r\n  return function (source) {\r\n    var re = /{([^}]+)}/;\r\n    var m;\r\n    var result = template;\r\n\r\n    while (m = re.exec(result)) {\r\n      result = result.replace(m[0], source[m[1]]);\r\n    }\r\n\r\n    return result\r\n  }\r\n}\n\nfunction orderAsc (node0, node1) {\r\n  if (node0.text < node1.text) {\r\n    return -1\r\n  }\r\n\r\n  if (node0.text > node1.text) {\r\n    return 1\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\nfunction orderDesc (node0, node1) {\r\n  if (node0.text < node1.text) {\r\n    return 1\r\n  }\r\n\r\n  if (node0.text > node1.text) {\r\n    return -1\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\nfunction getCompareFunction (order) {\r\n  switch (order.toLowerCase()) {\r\n    case 'asc': return orderAsc\r\n    case 'desc': return orderDesc\r\n  }\r\n}\r\n\r\nfunction sort (source, compareFunction) {\r\n  if (typeof compareFunction === 'string') {\r\n    compareFunction = getCompareFunction(compareFunction);\r\n  }\r\n\r\n  if (Array.isArray(source) && typeof compareFunction === 'function') {\r\n    source.sort(compareFunction);\r\n  }\r\n}\n\nfunction fetchDelay (ms) {\r\n  return new Promise(function (resolve) {\r\n    setTimeout(resolve, ms);\r\n  })\r\n}\n\nvar Tree = function Tree (vm) {\n  var this$1 = this;\n\r\n  this.vm = vm;\r\n  this.options = vm.opts;\r\n\r\n  this.activeElement = null;\r\n\r\n  // We have to convert 'fetchData' to function. It must return Promise always\r\n  var fetchData = this.options.fetchData;\r\n\r\n  if (typeof fetchData === 'string') {\r\n    this.options.fetchData = (function (template) {\r\n      var urlTemplate = createTemplate(template);\r\n\r\n      return function (node) {\r\n        return get(urlTemplate(node)).catch(this$1.options.onFetchError)\r\n      }\r\n    })(fetchData);\r\n  }\r\n};\r\n\r\nTree.prototype.$on = function $on (name) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  (ref = this.vm).$on.apply(ref, [ name ].concat( args ));\r\n};\r\n\r\nTree.prototype.$once = function $once (name) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  (ref = this.vm).$once.apply(ref, [ name ].concat( args ));\r\n};\r\n\r\nTree.prototype.$off = function $off (name) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  (ref = this.vm).$off.apply(ref, [ name ].concat( args ));\r\n};\r\n\r\nTree.prototype.$emit = function $emit (name) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  if (this.__silence) {\r\n    return\r\n  }\r\n\r\n  (ref = this.vm).$emit.apply(ref, [ name ].concat( args ));\r\n\r\n  if (this.options.store) {\r\n    this.vm.$emit('LIQUOR_NOISE');\r\n  }\r\n};\r\n\r\nTree.prototype._sort = function _sort (source, compareFn, deep) {\r\n  if (deep !== false) {\r\n    this.recurseDown(source, function (node) {\r\n      if (node.hasChildren()) {\r\n        sort(node.children, compareFn);\r\n      }\r\n    });\r\n  }\r\n\r\n  sort(source, compareFn);\r\n};\r\n\r\nTree.prototype.sortTree = function sortTree (compareFn, deep) {\r\n  this._sort(this.model, compareFn, deep);\r\n};\r\n\r\nTree.prototype.sort = function sort$$1 (query, compareFn, deep) {\n    var this$1 = this;\n\r\n  var targetNode = this.find(query, true);\r\n\r\n  if (!targetNode || !compareFn) {\r\n    return\r\n  }\r\n\r\n  targetNode.forEach(function (node) {\r\n    this$1._sort(node.children, compareFn, deep);\r\n  });\r\n};\r\n\r\nTree.prototype.clearFilter = function clearFilter () {\r\n  this.recurseDown(function (node) {\r\n    node.state('matched', false);\r\n    node.state('visible', true);\r\n    node.state('expanded', node.__expanded);\r\n\r\n    node.__expanded = undefined;\r\n    node.showChildren = true;\r\n  });\r\n\r\n  this.vm.matches.length = 0;\r\n  this.vm.$emit('tree:filtered', [], '');\r\n};\r\n\r\nTree.prototype.filter = function filter (query) {\r\n  if (!query) {\r\n    return this.clearFilter()\r\n  }\r\n\r\n  var matches = [];\r\n  var predicate = this.options.filter.matcher;\r\n  var ref = this.options.filter;\n    var showChildren = ref.showChildren;\n    var plainList = ref.plainList;\r\n\r\n  // collect nodes\r\n  this.recurseDown(function (node) {\r\n    if (predicate(query, node)) {\r\n      matches.push(node);\r\n    }\r\n\r\n    node.showChildren = true;\r\n\r\n    // save prev `expanded` state\r\n    if (undefined === node.__expanded) {\r\n      node.__expanded = node.state('expanded');\r\n    }\r\n\r\n    node.state('visible', false);\r\n    node.state('matched', false);\r\n    node.state('expanded', true);\r\n  });\r\n\r\n  matches.reverse().forEach(function (node) {\r\n    node.state('matched', true);\r\n    node.state('visible', true);\r\n\r\n    node.showChildren = !plainList;\r\n\r\n    if (node.hasChildren()) {\r\n      node.recurseDown(function (n) {\r\n        n.state('visible', !!showChildren);\r\n      }, true);\r\n    }\r\n\r\n    node.recurseUp(function (parent) {\r\n      parent.state('visible', true);\r\n      parent.state('expanded', true);\r\n    });\r\n\r\n    if (node.hasChildren()) {\r\n      node.state('expanded', false);\r\n    }\r\n  });\r\n\r\n  this.vm.matches = matches;\r\n\r\n  this.vm.$emit('tree:filtered', matches, query);\r\n\r\n  return matches\r\n};\r\n\r\nTree.prototype.selected = function selected () {\r\n  return new (Function.prototype.bind.apply( Selection, [ null ].concat( [this], this.selectedNodes) ))\r\n};\r\n\r\nTree.prototype.checked = function checked () {\r\n  if (!this.options.checkbox) {\r\n    return null\r\n  }\r\n\r\n  return new (Function.prototype.bind.apply( Selection, [ null ].concat( [this], this.checkedNodes) ))\r\n};\r\n\r\nTree.prototype.loadChildren = function loadChildren (node) {\n    var this$1 = this;\n\r\n  if (!node) {\r\n    return\r\n  }\r\n\r\n  this.$emit('tree:data:fetch', node);\r\n\r\n  if (this.options.minFetchDelay > 0 && node.vm) {\r\n    node.vm.loading = true;\r\n  }\r\n\r\n  var result = this.fetch(node)\r\n    .then(function (children) {\r\n      node.append(children);\r\n      node.isBatch = false;\r\n\r\n      if (this$1.options.autoCheckChildren) {\r\n        if (node.checked()) {\r\n          node.recurseDown(function (child) {\r\n            child.state('checked', true);\r\n          });\r\n        }\r\n\r\n        node.refreshIndeterminateState();\r\n      }\r\n\r\n      this$1.$emit('tree:data:received', node);\r\n    });\r\n\r\n  return Promise.all([\r\n    fetchDelay(this.options.minFetchDelay),\r\n    result\r\n  ]).then(function (_) {\r\n    if (node.vm) {\r\n      node.vm.loading = false;\r\n    }\r\n\r\n    return result\r\n  })\r\n};\r\n\r\nTree.prototype.fetch = function fetch (node, parseData) {\n    var this$1 = this;\n\r\n  var result = this.options.fetchData(node);\r\n\r\n  if (!result.then) {\r\n    result = get(result)\r\n      .catch(this.options.onFetchError);\r\n  }\r\n\r\n  if (parseData === false) {\r\n    return result\r\n  }\r\n\r\n  return result\r\n    .then(function (data) {\r\n      try {\r\n        return this$1.parse(data, this$1.options.modelParse)\r\n      } catch (e) {\r\n        throw new Error(e)\r\n      }\r\n    })\r\n    .catch(this.options.onFetchError)\r\n};\r\n\r\nTree.prototype.fetchInitData = function fetchInitData () {\r\n  // simulate root node\r\n  var node = {\r\n    id: 'root',\r\n    name: 'root'\r\n  };\r\n\r\n  return this.fetch(node, false)\r\n};\r\n\r\nTree.prototype.setModel = function setModel (data) {\n    var this$1 = this;\n\r\n  return new Promise(function (resolve) {\r\n    this$1.model = this$1.parse(data, this$1.options.modelParse);\r\n\r\n    /* eslint-disable */\r\n    requestAnimationFrame(function (_) {\r\n      this$1.vm.model = this$1.model;\r\n      resolve();\r\n    });\r\n    /* eslint-enable */\r\n\r\n    /**\r\n    * VueJS transform properties to reactives when constructor is running\r\n    * And we lose List object (extended from Array)\r\n    */\r\n    this$1.selectedNodes = new List();\r\n    this$1.checkedNodes = new List();\r\n\r\n    recurseDown(this$1.model, function (node) {\r\n      node.tree = this$1;\r\n\r\n      if (node.selected()) {\r\n        this$1.selectedNodes.add(node);\r\n      }\r\n\r\n      if (node.checked()) {\r\n        this$1.checkedNodes.add(node);\r\n\r\n        if (node.parent) {\r\n          node.parent.refreshIndeterminateState();\r\n        }\r\n      }\r\n\r\n      if (this$1.options.autoDisableChildren && node.disabled()) {\r\n        node.recurseDown(function (child) {\r\n          child.state('disabled', true);\r\n        });\r\n      }\r\n    });\r\n\r\n    if (!this$1.options.multiple && this$1.selectedNodes.length) {\r\n      var top = this$1.selectedNodes.top();\r\n\r\n      this$1.selectedNodes.forEach(function (node) {\r\n        if (top !== node) {\r\n          node.state('selected', false);\r\n        }\r\n      });\r\n\r\n      this$1.selectedNodes\r\n        .empty()\r\n        .add(top);\r\n    }\r\n\r\n    // Nodes can't be selected on init. By it's possible to select through API\r\n    if (this$1.options.checkOnSelect && this$1.options.checkbox) {\r\n      this$1.unselectAll();\r\n    }\r\n  })\r\n};\r\n\r\nTree.prototype.recurseDown = function recurseDown$1 (node, fn) {\r\n  if (!fn && node) {\r\n    fn = node;\r\n    node = this.model;\r\n  }\r\n\r\n  return recurseDown(node, fn)\r\n};\r\n\r\nTree.prototype.select = function select (node, extendList) {\r\n  var treeNode = this.getNode(node);\r\n\r\n  if (!treeNode) {\r\n    return false\r\n  }\r\n\r\n  if (this.options.multiple && extendList) {\r\n    this.selectedNodes.add(treeNode);\r\n  } else {\r\n    this.unselectAll();\r\n    this.selectedNodes\r\n      .empty()\r\n      .add(treeNode);\r\n  }\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.selectAll = function selectAll () {\n    var this$1 = this;\n\r\n  if (!this.options.multiple) {\r\n    return false\r\n  }\r\n\r\n  this.selectedNodes.empty();\r\n\r\n  this.recurseDown(function (node) {\r\n    this$1.selectedNodes.add(\r\n      node.select(true)\r\n    );\r\n  });\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.unselect = function unselect (node) {\r\n  var treeNode = this.getNode(node);\r\n\r\n  if (!treeNode) {\r\n    return false\r\n  }\r\n\r\n  this.selectedNodes.remove(treeNode);\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.unselectAll = function unselectAll () {\r\n  var node;\r\n\r\n  while (node = this.selectedNodes.pop()) {\r\n    node.unselect();\r\n  }\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.check = function check (node) {\r\n  this.checkedNodes.add(node);\r\n};\r\n\r\nTree.prototype.uncheck = function uncheck (node) {\r\n  this.checkedNodes.remove(node);\r\n};\r\n\r\nTree.prototype.checkAll = function checkAll () {\r\n  this.recurseDown(function (node) {\r\n    if (node.depth === 0) {\r\n      if (node.indeterminate()) {\r\n        node.state('indeterminate', false);\r\n      }\r\n\r\n      node.check();\r\n    }\r\n  });\r\n};\r\n\r\nTree.prototype.uncheckAll = function uncheckAll () {\r\n  var node;\r\n\r\n  while (node = this.checkedNodes.pop()) {\r\n    node.uncheck();\r\n  }\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.expand = function expand (node) {\r\n  if (node.expanded()) {\r\n    return false\r\n  }\r\n\r\n  node.expand();\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.collapse = function collapse (node) {\r\n  if (node.collapsed()) {\r\n    return false\r\n  }\r\n\r\n  node.collapse();\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.toggleExpand = function toggleExpand (node) {\r\n  if (!node.hasChildren()) {\r\n    return false\r\n  }\r\n\r\n  node.toggleExpand();\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.toggleCollapse = function toggleCollapse (node) {\r\n  if (!node.hasChildren()) {\r\n    return false\r\n  }\r\n\r\n  node.toggleCollapse();\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.expandAll = function expandAll () {\r\n  this.recurseDown(function (node) {\r\n    if (node.hasChildren() && node.collapsed()) {\r\n      node.expand();\r\n    }\r\n  });\r\n};\r\n\r\nTree.prototype.collapseAll = function collapseAll () {\r\n  this.recurseDown(function (node) {\r\n    if (node.hasChildren() && node.expanded()) {\r\n      node.collapse();\r\n    }\r\n  });\r\n};\r\n\r\nTree.prototype.index = function index (node, verbose) {\r\n  var target = node.parent;\r\n\r\n  if (target) {\r\n    target = target.children;\r\n  } else {\r\n    target = this.model;\r\n  }\r\n\r\n  var index = target.indexOf(node);\r\n\r\n  if (verbose) {\r\n    return {\r\n      index: index,\r\n      target: target,\r\n      node: target[index]\r\n    }\r\n  }\r\n\r\n  return index\r\n};\r\n\r\nTree.prototype.nextNode = function nextNode (node) {\r\n  var ref = this.index(node, true);\n    var target = ref.target;\n    var index = ref.index;\r\n\r\n  return target[index + 1] || null\r\n};\r\n\r\nTree.prototype.nextVisibleNode = function nextVisibleNode (node) {\r\n  if (node.hasChildren() && node.expanded()) {\r\n    return node.first()\r\n  }\r\n\r\n  var nextNode = this.nextNode(node);\r\n\r\n  if (!nextNode && node.parent) {\r\n    return node.parent.next()\r\n  }\r\n\r\n  return nextNode\r\n};\r\n\r\nTree.prototype.prevNode = function prevNode (node) {\r\n  var ref = this.index(node, true);\n    var target = ref.target;\n    var index = ref.index;\r\n\r\n  return target[index - 1] || null\r\n};\r\n\r\nTree.prototype.prevVisibleNode = function prevVisibleNode (node) {\r\n  var prevNode = this.prevNode(node);\r\n\r\n  if (!prevNode) {\r\n    return node.parent\r\n  }\r\n\r\n  if (prevNode.hasChildren() && prevNode.expanded()) {\r\n    return prevNode.last()\r\n  }\r\n\r\n  return prevNode\r\n};\r\n\r\nTree.prototype.addToModel = function addToModel (node, index) {\n    var this$1 = this;\n    if ( index === void 0 ) index = this.model.length;\n\r\n  node = this.objectToNode(node);\r\n\r\n  this.model.splice(index, 0, node);\r\n  this.recurseDown(node, function (n) {\r\n    n.tree = this$1;\r\n  });\r\n\r\n  this.$emit('node:added', node);\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.append = function append (criteria, node) {\r\n  var targetNode = this.find(criteria);\r\n\r\n  if (targetNode) {\r\n    return targetNode.append(node)\r\n  }\r\n\r\n  return false\r\n};\r\n\r\nTree.prototype.prepend = function prepend (criteria, node) {\r\n  var targetNode = this.find(criteria);\r\n\r\n  if (targetNode) {\r\n    return targetNode.prepend(node)\r\n  }\r\n\r\n  return false\r\n};\r\n\r\nTree.prototype.before = function before (targetNode, sourceNode) {\r\n  targetNode = this.find(targetNode);\r\n\r\n  var position = this.index(targetNode, true);\r\n  var node = this.objectToNode(sourceNode);\r\n\r\n  if (!~position.index) {\r\n    return false\r\n  }\r\n\r\n  position.target.splice(\r\n    position.index,\r\n    0,\r\n    node\r\n  );\r\n\r\n  node.parent = targetNode.parent;\r\n  this.$emit('node:added', node);\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.after = function after (targetNode, sourceNode) {\r\n  targetNode = this.find(targetNode);\r\n\r\n  var position = this.index(targetNode, true);\r\n  var node = this.objectToNode(sourceNode);\r\n\r\n  if (!~position.index) {\r\n    return false\r\n  }\r\n\r\n  position.target.splice(\r\n    position.index + 1,\r\n    0,\r\n    node\r\n  );\r\n\r\n  node.parent = targetNode.parent;\r\n  this.$emit('node:added', node);\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.addNode = function addNode (node) {\r\n  var index = this.model.length;\r\n\r\n  node = objectToNode(node);\r\n\r\n  this.model.splice(index, 0, node);\r\n  this.$emit('node:added', node);\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.remove = function remove (criteria, multiple) {\r\n  return this.removeNode(\r\n    this.find(criteria, multiple)\r\n  )\r\n};\r\n\r\nTree.prototype.removeNode = function removeNode (node) {\r\n  if (node instanceof Selection) {\r\n    return node.remove()\r\n  }\r\n\r\n  if (!node) {\r\n    return false\r\n  }\r\n\r\n  if (!node.parent) {\r\n    if (~this.model.indexOf(node)) {\r\n      this.model.splice(\r\n        this.model.indexOf(node),\r\n        1\r\n      );\r\n    }\r\n  } else {\r\n    var children = node.parent.children;\r\n\r\n    if (~children.indexOf(node)) {\r\n      children.splice(\r\n        children.indexOf(node),\r\n        1\r\n      );\r\n    }\r\n  }\r\n\r\n  if (node.parent) {\r\n    if (node.parent.indeterminate() && !node.parent.hasChildren()) {\r\n      node.parent.state('indeterminate', false);\r\n    }\r\n  }\r\n\r\n  if (this.activeElement !== null) {\r\n    if (node.id === this.activeElement.id) {\r\n      this.activeElement = null;\r\n    }\r\n  }\r\n\r\n  node.parent = null;\r\n\r\n  this.$emit('node:removed', node);\r\n\r\n  this.selectedNodes.remove(node);\r\n  this.checkedNodes.remove(node);\r\n\r\n  var matches = this.vm.matches;\r\n\r\n  if (matches && matches.length) {\r\n    if (matches.includes(node)) {\r\n      matches.splice(\r\n        matches.indexOf(node),\r\n        1\r\n      );\r\n    }\r\n  }\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.isNode = function isNode (node) {\r\n  return node instanceof Node\r\n};\r\n\r\nTree.prototype.find = function find$1 (criteria, multiple) {\r\n  if (this.isNode(criteria)) {\r\n    return criteria\r\n  }\r\n\r\n  var result = find(this.model, criteria);\r\n\r\n  if (!result || !result.length) {\r\n    return new Selection(this, [])\r\n  }\r\n\r\n  if (multiple === true) {\r\n    return new Selection(this, result)\r\n  }\r\n\r\n  return new Selection(this, [result[0]])\r\n};\r\n\r\nTree.prototype.updateData = function updateData (criteria, callback) {\r\n  var nodes = this.find(criteria);\r\n\r\n  nodes.forEach(function (node) { return node.setData(callback(node)); });\r\n\r\n  return nodes\r\n};\r\n\r\nTree.prototype.getNodeById = function getNodeById (id) {\r\n  var targetNode = null;\r\n\r\n  recurseDown(this.model, function (node) {\r\n    if ('' + node.id === id) {\r\n      targetNode = node;\r\n      return false\r\n    }\r\n  });\r\n\r\n  return targetNode\r\n};\r\n\r\nTree.prototype.getNode = function getNode (node) {\r\n  if (this.isNode(node)) {\r\n    return node\r\n  }\r\n\r\n  return null\r\n};\r\n\r\nTree.prototype.objectToNode = function objectToNode$1 (obj) {\r\n  return objectToNode(this, obj)\r\n};\r\n\r\nTree.prototype.parse = function parse (data, options) {\r\n  if (!options) {\r\n    options = this.options.propertyNames;\r\n  }\r\n\r\n  try {\r\n    return TreeParser.parse(data, this, options)\r\n  } catch (e) {\r\n    return []\r\n  }\r\n};\n\nvar keyCodes = {\r\n  'ARROW_LEFT': 37,\r\n  'ARROW_TOP': 38,\r\n  'ARROW_RIGHT': 39,\r\n  'ARROW_BOTTOM': 40,\r\n  'SPACE': 32,\r\n  'DELETE': 46,\r\n  'ENTER': 13,\r\n  'ESC': 27\r\n};\r\n\r\nvar codesArr = [37, 38, 39, 40, 32];\r\n\r\nfunction focusUp (tree, node) {\r\n  var prevNode = tree.prevVisibleNode(node);\r\n\r\n  if (!prevNode) {\r\n    return\r\n  }\r\n\r\n  if (prevNode.disabled()) {\r\n    return focusUp(tree, prevNode)\r\n  }\r\n\r\n  prevNode.focus();\r\n}\r\n\r\nfunction focusdDown (tree, node) {\r\n  var nextNode = tree.nextVisibleNode(node);\r\n\r\n  if (!nextNode) {\r\n    return\r\n  }\r\n\r\n  if (nextNode.disabled()) {\r\n    return focusdDown(tree, nextNode)\r\n  }\r\n\r\n  nextNode.focus();\r\n}\r\n\r\nfunction checkNode (tree, node) {\r\n  if (!tree.options.checkbox) {\r\n    return\r\n  }\r\n\r\n  if (node.checked()) {\r\n    node.uncheck();\r\n  } else {\r\n    node.check();\r\n  }\r\n}\r\n\r\nfunction leftArrow (tree, node) {\r\n  if (node.expanded()) {\r\n    node.collapse();\r\n  } else {\r\n    var parent = node.parent;\r\n\r\n    if (parent) {\r\n      parent.focus();\r\n    }\r\n  }\r\n}\r\n\r\nfunction rightArrow (tree, node) {\r\n  if (node.collapsed()) {\r\n    node.expand();\r\n  } else {\r\n    var first = node.first();\r\n\r\n    if (first) {\r\n      first.focus();\r\n    }\r\n  }\r\n}\r\n\r\nfunction deleteNode (tree, node) {\r\n  var deletion = tree.options.deletion;\r\n\r\n  if (deletion) {\r\n    if (typeof deletion === 'function') {\r\n      if (deletion(node) === true) {\r\n        node.remove();\r\n      }\r\n    } else if (deletion === true) {\r\n      node.remove();\r\n    }\r\n  }\r\n}\r\n\r\nfunction initKeyboardNavigation (tree) {\r\n  var vm = tree.vm;\r\n  var $el = vm.$el;\r\n\r\n  $el.addEventListener('keydown', function (e) {\r\n    var code = e.keyCode;\r\n    var node = tree.activeElement;\r\n\r\n    if (!tree.isNode(node)) {\r\n      return\r\n    }\r\n\r\n    if (node.isEditing) {\r\n      switch (code) {\r\n        case keyCodes.ESC: return node.stopEditing(false)\r\n      }\r\n    } else {\r\n      if (codesArr.includes(code)) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n\r\n      switch (code) {\r\n        case keyCodes.ARROW_LEFT: return leftArrow(tree, node)\r\n        case keyCodes.ARROW_RIGHT: return rightArrow(tree, node)\r\n        case keyCodes.ARROW_TOP: return focusUp(tree, node)\r\n        case keyCodes.ARROW_BOTTOM: return focusdDown(tree, node)\r\n        case keyCodes.SPACE:\r\n        case keyCodes.ENTER: return checkNode(tree, node)\r\n        case keyCodes.DELETE: return deleteNode(tree, node)\r\n      }\r\n    }\r\n  }, true);\r\n}\n\nfunction assert (truth, message) {\r\n  if (truth === false) {\r\n    throw new Error(message)\r\n  }\r\n}\n\nfunction initEvents (vm) {\r\n  var ref = vm.opts;\n  var multiple = ref.multiple;\n  var checkbox = ref.checkbox;\r\n  var tree = vm.tree;\r\n\r\n  var emitter = function (obj) {\r\n    var selected = vm.selected();\r\n\r\n    if (!checkbox) {\r\n      vm.$emit('input', multiple ? selected : (selected[0] || null));\r\n    } else {\r\n      vm.$emit('input', {\r\n        selected: multiple ? selected : (selected[0] || null),\r\n        checked: vm.checked()\r\n      });\r\n    }\r\n  };\r\n\r\n  emitter();\r\n\r\n  tree.$on('node:selected', emitter);\r\n  tree.$on('node:unselected', emitter);\r\n\r\n  if (checkbox) {\r\n    tree.$on('node:checked', emitter);\r\n    tree.$on('node:unchecked', emitter);\r\n  }\r\n\r\n  tree.$on('node:added', function (targetNode, newNode) {\r\n    var node = newNode || targetNode;\r\n\r\n    if (checkbox) {\r\n      if (node.state('checked') && !tree.checkedNodes.has(node)) {\r\n        tree.checkedNodes.add(node);\r\n      }\r\n\r\n      node.refreshIndeterminateState();\r\n    }\r\n\r\n    if (node.state('selected') && !tree.selectedNodes.has(node)) {\r\n      tree.select(node);\r\n    }\r\n\r\n    emitter();\r\n  });\r\n}\r\n\r\nvar TreeMixin = {\r\n  mounted: function mounted () {\n    var this$1 = this;\n\r\n    var tree = new Tree(this);\r\n    var dataProvider;\r\n\r\n    this.tree = tree;\r\n    this._provided.tree = tree;\r\n\r\n    if (!this.data && this.opts.fetchData) {\r\n      // Get initial data if we don't have a data directly\r\n      // In this case we call 'fetcher' with node.id == 'root' && node.name == 'root'\r\n      dataProvider = tree.fetchInitData();\r\n    } else if (this.data && this.data.then) {\r\n      // Yeah... nice check!\r\n      dataProvider = this.data;\r\n      this.loading = true;\r\n    } else {\r\n      dataProvider = Promise.resolve(this.data);\r\n    }\r\n\r\n    dataProvider.then(function (data) {\r\n      if (!data) {\r\n        data = [];\r\n      }\r\n\r\n      if (this$1.opts.store) {\r\n        this$1.connectStore(this$1.opts.store);\r\n      } else {\r\n        this$1.tree.setModel(data);\r\n      }\r\n\r\n      if (this$1.loading) {\r\n        this$1.loading = false;\r\n      }\r\n\r\n      this$1.$emit('tree:mounted', this$1);\r\n\r\n      initEvents(this$1);\r\n    });\r\n\r\n    if (this.opts.keyboardNavigation !== false) {\r\n      initKeyboardNavigation(tree);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    connectStore: function connectStore (store) {\n      var this$1 = this;\n\r\n      var Store = store.store;\n      var mutations = store.mutations;\n      var getter = store.getter;\n      var dispatcher = store.dispatcher;\r\n\r\n      assert(typeof getter === 'function', '`getter` must be a function');\r\n      assert(typeof dispatcher === 'function', '`dispatcher` must be a function');\r\n\r\n      if (undefined !== mutations) {\r\n        assert(Array.isArray(mutations), '`mutations` must be an array');\r\n      }\r\n\r\n      Store.subscribe(function (action, state) {\r\n        if (!mutations) {\r\n          this$1.tree.setModel(getter());\r\n        } else if (mutations.includes(action.type)) {\r\n          this$1.tree.setModel(getter());\r\n        }\r\n      });\r\n\r\n      this.tree.setModel(getter());\r\n\r\n      this.$on('LIQUOR_NOISE', function () {\r\n        this$1.$nextTick(function (_) {\r\n          dispatcher(this$1.toJSON());\r\n        });\r\n      });\r\n    },\r\n\r\n    recurseDown: function recurseDown (fn) {\r\n      this.tree.recurseDown(fn);\r\n    },\r\n\r\n    selected: function selected () {\r\n      return this.tree.selected()\r\n    },\r\n\r\n    checked: function checked () {\r\n      return this.tree.checked()\r\n    },\r\n\r\n    append: function append (criteria, node) {\r\n      // append to model\r\n      if (!node) {\r\n        return this.tree.addToModel(criteria, this.tree.model.length)\r\n      }\r\n\r\n      return this.tree.append(criteria, node)\r\n    },\r\n\r\n    prepend: function prepend (criteria, node) {\r\n      if (!node) {\r\n        return this.tree.addToModel(criteria, 0)\r\n      }\r\n\r\n      return this.tree.prepend(criteria, node)\r\n    },\r\n\r\n    addChild: function addChild (criteria, node) {\r\n      return this.append(criteria, node)\r\n    },\r\n\r\n    remove: function remove (criteria, multiple) {\r\n      return this.tree.remove(criteria, multiple)\r\n    },\r\n\r\n    before: function before (criteria, node) {\r\n      if (!node) {\r\n        return this.prepend(criteria)\r\n      }\r\n\r\n      return this.tree.before(criteria, node)\r\n    },\r\n\r\n    after: function after (criteria, node) {\r\n      if (!node) {\r\n        return this.append(criteria)\r\n      }\r\n\r\n      return this.tree.after(criteria, node)\r\n    },\r\n\r\n    find: function find (criteria, multiple) {\r\n      return this.tree.find(criteria, multiple)\r\n    },\r\n\r\n    findAll: function findAll (criteria) {\r\n      return this.tree.find(criteria, true)\r\n    },\r\n\r\n    expandAll: function expandAll () {\r\n      return this.tree.expandAll()\r\n    },\r\n\r\n    updateData: function updateData (criteria, callback) {\r\n      return this.tree.updateData(criteria, callback)\r\n    },\r\n\r\n    collapseAll: function collapseAll () {\r\n      return this.tree.collapseAll()\r\n    },\r\n\r\n    sortTree: function sortTree (compareFn, deep) {\r\n      return this.tree.sortTree(compareFn, deep)\r\n    },\r\n\r\n    sort: function sort () {\n      var ref;\n\n      var args = [], len = arguments.length;\n      while ( len-- ) args[ len ] = arguments[ len ];\r\n      return (ref = this.tree).sort.apply(ref, args)\r\n    },\r\n\r\n    setModel: function setModel (data) {\r\n      return this.tree.setModel(data)\r\n    },\r\n\r\n    getRootNode: function getRootNode () {\r\n      return this.tree.model.length === 1\r\n        ? this.tree.model[0]\r\n        : this.tree.model\r\n    },\r\n\r\n    toJSON: function toJSON () {\r\n      return JSON.parse(\r\n        JSON.stringify(this.model)\r\n      )\r\n    }\r\n  }\r\n\r\n/*eslint semi: 0 */\r\n/* https://github.com/vuejs/rollup-plugin-vue/issues/169 */\r\n};\n\nvar DropPosition = {\r\n  ABOVE: 'drag-above',\r\n  BELOW: 'drag-below',\r\n  ON: 'drag-on'\r\n};\r\n\r\nfunction isMovingStarted (event, start) {\r\n  return Math.abs(event.clientX - start[0]) > 5 || Math.abs(event.clientY - start[1]) > 5\r\n}\r\n\r\nfunction composedPath (event) {\r\n  var el = event.target;\r\n  var path = [];\r\n\r\n  while (el) {\r\n    path.push(el);\r\n\r\n    if (el.tagName === 'HTML') {\r\n      path.push(document);\r\n      path.push(window);\r\n\r\n      return path\r\n    }\r\n\r\n    el = el.parentElement;\r\n  }\r\n\r\n  return path\r\n}\r\n\r\nfunction getPath (event) {\r\n  if (event.path) {\r\n    return event.path\r\n  }\r\n\r\n  if (event.composedPath) {\r\n    return event.composedPath()\r\n  }\r\n\r\n  return composedPath(event)\r\n}\r\n\r\nfunction getSelectedNode (event) {\r\n  var className;\r\n  var i = 0;\r\n\r\n  var path = getPath(event);\r\n\r\n  for (; i < path.length; i++) {\r\n    className = path[i].className || '';\r\n\r\n    if (/tree-node/.test(className)) {\r\n      return path[i]\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nfunction getDropDestination (e) {\r\n  var selectedNode = getSelectedNode(e);\r\n\r\n  if (!selectedNode) {\r\n    return null\r\n  }\r\n\r\n  return selectedNode\r\n}\r\n\r\nfunction updateHelperClasses (target, classes) {\r\n  if (!target) {\r\n    return\r\n  }\r\n\r\n  var className = target.className;\r\n\r\n  if (!classes) {\r\n    for (var i in DropPosition) {\r\n      className = className.replace(DropPosition[i], '');\r\n    }\r\n\r\n    className.replace('dragging', '');\r\n  } else if (!new RegExp(classes).test(className)) {\r\n    className += ' ' + classes;\r\n  }\r\n\r\n  target.className = className.replace(/\\s+/g, ' ');\r\n}\r\n\r\nfunction getDropPosition (e, element) {\r\n  var coords = element.getBoundingClientRect();\r\n  var nodeSection = coords.height / 3;\r\n\r\n  var dropPosition = DropPosition.ON;\r\n\r\n  if (coords.top + nodeSection >= e.clientY) {\r\n    dropPosition = DropPosition.ABOVE;\r\n  } else if (coords.top + nodeSection * 2 <= e.clientY) {\r\n    (\r\n      dropPosition = DropPosition.BELOW\r\n    );\r\n  }\r\n\r\n  return dropPosition\r\n}\r\n\r\nfunction callDndCb (args, opts, method) {\r\n  if (!opts || !opts[method] || typeof opts[method] !== 'function') {\r\n    return\r\n  }\r\n\r\n  return opts[method].apply(opts, args) !== false\r\n}\r\n\r\nfunction clearDropClasses (parent) {\r\n  for (var key in DropPosition) {\r\n    var el = parent.querySelectorAll((\".\" + (DropPosition[key])));\r\n\r\n    for (var i = 0; i < el.length; i++) {\r\n      updateHelperClasses(el[i]);\r\n    }\r\n  }\r\n}\r\n\r\nvar TreeDnd = {\r\n  methods: {\r\n    onDragStart: function onDragStart (e) {\r\n      e.preventDefault();\r\n    },\r\n\r\n    startDragging: function startDragging (node, event) {\r\n      if (!node.isDraggable() || callDndCb([node], this.tree.options.dnd, 'onDragStart') === false) {\r\n        return\r\n      }\r\n\r\n      this.$$startDragPosition = [event.clientX, event.clientY];\r\n      this.$$possibleDragNode = node;\r\n\r\n      this.initDragListeners();\r\n    },\r\n\r\n    initDragListeners: function initDragListeners () {\n      var this$1 = this;\n\r\n      var dropPosition;\r\n\r\n      var removeListeners = function () {\r\n        window.removeEventListener('mouseup', onMouseUp, true);\r\n        window.removeEventListener('mousemove', onMouseMove, true);\r\n      };\r\n\r\n      var onMouseUp = function (e) {\r\n        if (!this$1.$$startDragPosition) {\r\n          e.stopPropagation();\r\n        }\r\n\r\n        if (this$1.draggableNode) {\r\n          this$1.draggableNode.node.state('dragging', false);\r\n        }\r\n\r\n        if (this$1.$$dropDestination && this$1.tree.isNode(this$1.$$dropDestination) && this$1.$$dropDestination.vm) {\r\n          updateHelperClasses(this$1.$$dropDestination.vm.$el, null);\r\n\r\n          var cbResult = callDndCb(\r\n            [this$1.draggableNode.node, this$1.$$dropDestination, dropPosition],\r\n            this$1.tree.options.dnd,\r\n            'onDragFinish'\r\n          );\r\n\r\n          if (cbResult !== false && !(!this$1.$$dropDestination.isDropable() && dropPosition === DropPosition.ON || !dropPosition)) {\r\n            this$1.draggableNode.node.finishDragging(this$1.$$dropDestination, dropPosition);\r\n            this$1.draggableNode.node.parent = this$1.$$dropDestination;\r\n          }\r\n\r\n          this$1.$$dropDestination = null;\r\n        }\r\n\r\n        this$1.$$possibleDragNode = null;\r\n        this$1.$set(this$1, 'draggableNode', null);\r\n\r\n        removeListeners();\r\n      };\r\n\r\n      var onMouseMove = function (e) {\r\n        if (this$1.$$startDragPosition && !isMovingStarted(e, this$1.$$startDragPosition)) {\r\n          return\r\n        } else {\r\n          this$1.$$startDragPosition = null;\r\n        }\r\n\r\n        if (this$1.$$possibleDragNode) {\r\n          if (this$1.$$possibleDragNode.startDragging() === false) {\r\n            removeListeners();\r\n            this$1.$$possibleDragNode = null;\r\n\r\n            return\r\n          }\r\n\r\n          this$1.$set(this$1, 'draggableNode', { node: this$1.$$possibleDragNode, left: 0, top: 0 });\r\n          this$1.$$possibleDragNode = null;\r\n        }\r\n\r\n        this$1.draggableNode.left = e.clientX;\r\n        this$1.draggableNode.top = e.clientY;\r\n\r\n        var dropDestination = getDropDestination(e);\r\n\r\n        clearDropClasses(this$1.$el);\r\n\r\n        if (dropDestination) {\r\n          var dropDestinationId = dropDestination.getAttribute('data-id');\r\n\r\n          if (this$1.draggableNode.node.id === dropDestinationId) {\r\n            return\r\n          }\r\n\r\n          if (!this$1.$$dropDestination || this$1.$$dropDestination.id !== dropDestinationId) {\r\n            this$1.$$dropDestination = this$1.tree.getNodeById(dropDestinationId);\r\n          }\r\n\r\n          if (this$1.$$dropDestination && this$1.draggableNode.node) {\r\n            var path = this$1.$$dropDestination.getPath();\r\n\r\n            if (path.includes(this$1.draggableNode.node)) {\r\n              this$1.$$dropDestination = null;\r\n              return\r\n            }\r\n          }\r\n\r\n          dropPosition = getDropPosition(e, dropDestination);\r\n\r\n          var cbResult = callDndCb(\r\n            [this$1.draggableNode.node, this$1.$$dropDestination, dropPosition],\r\n            this$1.tree.options.dnd,\r\n            'onDragOn'\r\n          );\r\n\r\n          var isDropable = this$1.$$dropDestination.isDropable() && cbResult !== false;\r\n\r\n          if (!isDropable && dropPosition === DropPosition.ON) {\r\n            dropPosition = null;\r\n          }\r\n\r\n          updateHelperClasses(dropDestination, dropPosition);\r\n        }\r\n      };\r\n\r\n      window.addEventListener('mouseup', onMouseUp, true);\r\n      window.addEventListener('mousemove', onMouseMove, true);\r\n    }\r\n  }\r\n};\n\n//\n\nvar defaults = {\n  direction: 'ltr',\n  multiple: true,\n  checkbox: false,\n  checkOnSelect: false,\n  autoCheckChildren: true,\n  autoDisableChildren: true,\n  checkDisabledChildren: true,\n  parentSelect: false,\n  keyboardNavigation: true,\n  nodeIndent: 24,\n  minFetchDelay: 0,\n  fetchData: null,\n  propertyNames: null,\n  deletion: false,\n  dnd: false,\n  editing: false,\n  onFetchError: function(err) { throw err }\n};\n\nvar filterDefaults = {\n  emptyText: 'Nothing found!',\n  matcher: function matcher(query, node) {\n    var isMatched = new RegExp(query, 'i').test(node.text);\n\n    if (isMatched) {\n      if (node.parent && new RegExp(query, 'i').test(node.parent.text)) {\n        return false\n      }\n    }\n\n    return isMatched\n  },\n  plainList: false,\n  showChildren: true\n};\n\nvar script$1 = {\n  name: 'Tree',\n  components: {\n    TreeNode: TreeNode$1,\n    DraggableNode: DraggableNode\n  },\n\n  mixins: [TreeMixin, TreeDnd],\n\n  provide: function (_) { return ({\n    tree: null\n  }); },\n\n  props: {\n    data: {},\n\n    options: {\n      type: Object,\n      default: function (_) { return ({}); }\n    },\n\n    filter: String,\n\n    tag: {\n      type: String,\n      default: 'div'\n    }\n  },\n\n  watch: {\n    filter: function filter (term) {\n      this.tree.filter(term);\n    }\n  },\n\n  computed: {\n    visibleModel: function visibleModel() {\n      return this.model.filter(function(node) {\n        return node && node.visible()\n      }) \n    },\n\n    visibleMatches: function visibleMatches() {\n      return this.matches.filter(function(node) {\n        return node && node.visible()\n      })\n    }\n  },\n\n  data: function data () {\n    // we should not mutating a prop directly...\n    // that's why we have to create a new object\n    // TODO: add method for changing options\n    var opts = Object.assign({}, defaults, this.options);\n\n    opts.filter = Object.assign(\n      {},\n      filterDefaults,\n      opts.filter\n    );\n\n    return {\n      model: [],\n      tree: null,\n      loading: false,\n      opts: opts,\n      matches: [],\n      draggableNode: null\n    }\n  }\n};\n\n/* script */\nvar __vue_script__$3 = script$1;\n// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\nscript$1.__file = \"TreeRoot.vue\";\n\n/* template */\nvar __vue_render__$2 = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.tag,{tag:\"component\",class:{'tree': true, 'tree-loading': this.loading, 'tree--draggable' : !!this.draggableNode},attrs:{\"role\":\"tree\"}},[(_vm.filter && _vm.matches.length == 0)?[_c('div',{staticClass:\"tree-filter-empty\",domProps:{\"innerHTML\":_vm._s(_vm.opts.filter.emptyText)}})]:[_c('ul',{staticClass:\"tree-root\",on:{\"dragstart\":_vm.onDragStart}},[(_vm.opts.filter.plainList && _vm.matches.length > 0)?_vm._l((_vm.visibleMatches),function(node){return _c('TreeNode',{key:node.id,attrs:{\"node\":node,\"options\":_vm.opts}})}):_vm._l((_vm.visibleModel),function(node){return _c('TreeNode',{key:node.id,attrs:{\"node\":node,\"options\":_vm.opts}})})],2)],_vm._v(\" \"),(_vm.draggableNode)?_c('DraggableNode',{attrs:{\"target\":_vm.draggableNode}}):_vm._e()],2)};\nvar __vue_staticRenderFns__$2 = [];\n\n  /* style */\n  var __vue_inject_styles__$3 = function (inject) {\n    if (!inject) { return }\n    inject(\"data-v-6db2091d_0\", { source: \".tree{overflow:auto}.tree-children,.tree-root{list-style:none;padding:0}.tree>.tree-filter-empty,.tree>.tree-root{padding:3px;box-sizing:border-box}.tree.tree--draggable .tree-node:not(.selected)>.tree-content:hover{background:0 0}.drag-above,.drag-below,.drag-on{position:relative;z-index:1}.drag-on>.tree-content{background:#fafcff;outline:1px solid #7baff2}.drag-above>.tree-content::before,.drag-below>.tree-content::after{display:block;content:'';position:absolute;height:8px;left:0;right:0;z-index:2;box-sizing:border-box;background-color:#3367d6;border:3px solid #3367d6;background-clip:padding-box;border-bottom-color:transparent;border-top-color:transparent;border-radius:0}.drag-above>.tree-content::before{top:0;transform:translateY(-50%)}.drag-below>.tree-content::after{bottom:0;transform:translateY(50%)}\", map: undefined, media: undefined });\n\n  };\n  /* scoped */\n  var __vue_scope_id__$3 = undefined;\n  /* module identifier */\n  var __vue_module_identifier__$3 = undefined;\n  /* functional template */\n  var __vue_is_functional_template__$3 = false;\n  /* style inject SSR */\n  \n\n  \n  var TreeRoot = normalizeComponent(\n    { render: __vue_render__$2, staticRenderFns: __vue_staticRenderFns__$2 },\n    __vue_inject_styles__$3,\n    __vue_script__$3,\n    __vue_scope_id__$3,\n    __vue_is_functional_template__$3,\n    __vue_module_identifier__$3,\n    createInjector,\n    undefined\n  );\n\nvar install = function (Vue) {\r\n  Vue.component(TreeRoot.name, TreeRoot);\r\n};\r\n\r\nTreeRoot.install = install;\r\n\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n  window.Vue.use(TreeRoot);\r\n}\n\nexport default TreeRoot;\n//# sourceMappingURL=liquor-tree.esm.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}